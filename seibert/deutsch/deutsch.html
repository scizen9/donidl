<!-- This file was generated by mk_html_help.pro -->
<html>
 
<head>
<TITLE>Deutsch Libraries</TITLE>
</head>
 
<body>
<H1>Deutsch Libraries</H1>
<P>
This page was created by the IDL library routine 
<CODE>mk_html_help</CODE>.  For more information on 
this routine, refer to the IDL Online Help Navigator 
or type: <P>
<PRE>     ? mk_html_help</PRE><P>
at the IDL command line prompt.<P>
<STRONG>Last modified: </STRONG>Thu Oct 14 13:12:16 1999.<P>
 
<HR>
 
<A NAME="ROUTINELIST">
<H1>List of Routines</H1></A>
<UL>
<LI><A HREF="#A10READ">A10READ</A>
<LI><A HREF="#APOGETINST">APOGETINST</A>
<LI><A HREF="#APOGUIDE">APOGUIDE</A>
<LI><A HREF="#ASTDISP">ASTDISP</A>
<LI><A HREF="#ASTROM">ASTROM</A>
<LI><A HREF="#ASTROMIT">ASTROMIT</A>
<LI><A HREF="#BINARIES">BINARIES</A>
<LI><A HREF="#BLACKSKY">BLACKSKY</A>
<LI><A HREF="#BSCENTRD">BSCENTRD</A>
<LI><A HREF="#BUILDAST">BUILDAST</A>
<LI><A HREF="#CALC_A">CALC_A</A>
<LI><A HREF="#CALC_ZDHA">CALC_ZDHA</A>
<LI><A HREF="#CHARLIST">CHARLIST</A>
<LI><A HREF="#CLEANEXAMINE">CLEANEXAMINE</A>
<LI><A HREF="#CMPWINSHO">CMPWINSHO</A>
<LI><A HREF="#CONTRAST">CONTRAST</A>
<LI><A HREF="#CONV_MAIL">CONV_MAIL</A>
<LI><A HREF="#CRD">CRD</A>
<LI><A HREF="#CREATEF">CREATEF</A>
<LI><A HREF="#DEFANSI">DEFANSI</A>
<LI><A HREF="#DELAST">DELAST</A>
<LI><A HREF="#DIAGFIND">DIAGFIND</A>
<LI><A HREF="#DIAGMARK">DIAGMARK</A>
<LI><A HREF="#DIAGRAM">DIAGRAM</A>
<LI><A HREF="#DISBOTH">DISBOTH</A>
<LI><A HREF="#DISCALC">DISCALC</A>
<LI><A HREF="#DISCALSP">DISCALSP</A>
<LI><A HREF="#DISCALSP2">DISCALSP2</A>
<LI><A HREF="#DISCALSPHR">DISCALSPHR</A>
<LI><A HREF="#DISFINDSPEC">DISFINDSPEC</A>
<LI><A HREF="#DISFITCOMPR">DISFITCOMPR</A>
<LI><A HREF="#DISFITLINE">DISFITLINE</A>
<LI><A HREF="#DISHDRFIX">DISHDRFIX</A>
<LI><A HREF="#DISLIST">DISLIST</A>
<LI><A HREF="#DISMKSPCAL">DISMKSPCAL</A>
<LI><A HREF="#DISMKSPCAL2">DISMKSPCAL2</A>
<LI><A HREF="#DISMKSPCAL3">DISMKSPCAL3</A>
<LI><A HREF="#DISMKSPFLAT">DISMKSPFLAT</A>
<LI><A HREF="#DISPBAR">DISPBAR</A>
<LI><A HREF="#DISREAD">DISREAD</A>
<LI><A HREF="#DISSLIT">DISSLIT</A>
<LI><A HREF="#DISSPEC">DISSPEC</A>
<LI><A HREF="#DOCIRCLE">DOCIRCLE</A>
<LI><A HREF="#DOFIND">DOFIND</A>
<LI><A HREF="#DOSTAT">DOSTAT</A>
<LI><A HREF="#DRAWCROSS">DRAWCROSS</A>
<LI><A HREF="#EXIST">EXIST</A>
<LI><A HREF="#EXTCAT_AC2000">EXTCAT_AC2000</A>
<LI><A HREF="#EXTRAC">EXTRAC</A>
<LI><A HREF="#FPR">FPR</A>
<LI><A HREF="#GAUSS2">GAUSS2</A>
<LI><A HREF="#GDRFLATEXAM">GDRFLATEXAM</A>
<LI><A HREF="#GDRMKCALS">GDRMKCALS</A>
<LI><A HREF="#GETDEFVAL">GETDEFVAL</A>
<LI><A HREF="#GETFILE">GETFILE</A>
<LI><A HREF="#GETSTRIP">GETSTRIP</A>
<LI><A HREF="#GRDREAD">GRDREAD</A>
<LI><A HREF="#GRIMAPER">GRIMAPER</A>
<LI><A HREF="#GRIMBADPIXMAP">GRIMBADPIXMAP</A>
<LI><A HREF="#GRIMCOMBINE">GRIMCOMBINE</A>
<LI><A HREF="#GRIMDARKCOMBINE">GRIMDARKCOMBINE</A>
<LI><A HREF="#GRIMFLATCOMBINE">GRIMFLATCOMBINE</A>
<LI><A HREF="#GRIMLIST">GRIMLIST</A>
<LI><A HREF="#GRIMPROC">GRIMPROC</A>
<LI><A HREF="#GRIMREAD">GRIMREAD</A>
<LI><A HREF="#GRIMSUMMARY">GRIMSUMMARY</A>
<LI><A HREF="#GSCA10COMP">GSCA10COMP</A>
<LI><A HREF="#GSCTAB2LST">GSCTAB2LST</A>
<LI><A HREF="#GSC_READ">GSC_READ</A>
<LI><A HREF="#GS_DISP">GS_DISP</A>
<LI><A HREF="#GS_FOVPLOT">GS_FOVPLOT</A>
<LI><A HREF="#GS_MAIN">GS_MAIN</A>
<LI><A HREF="#GS_ROAM">GS_ROAM</A>
<LI><A HREF="#HDRLOG">HDRLOG</A>
<LI><A HREF="#HLINES">HLINES</A>
<LI><A HREF="#IMCOMBINE">IMCOMBINE</A>
<LI><A HREF="#IMGBORD">IMGBORD</A>
<LI><A HREF="#IMGCLEAN[1]">IMGCLEAN[1]</A>
<LI><A HREF="#IMGCLEAN[2]">IMGCLEAN[2]</A>
<LI><A HREF="#IMGMRG">IMGMRG</A>
<LI><A HREF="#IMGMRG_CALL">IMGMRG_CALL</A>
<LI><A HREF="#IMGPASTE">IMGPASTE</A>
<LI><A HREF="#IMGPUT">IMGPUT</A>
<LI><A HREF="#IMGREAD">IMGREAD</A>
<LI><A HREF="#IMGROAM">IMGROAM</A>
<LI><A HREF="#IMGTEXT">IMGTEXT</A>
<LI><A HREF="#IMGUNDER">IMGUNDER</A>
<LI><A HREF="#IMSCL">IMSCL</A>
<LI><A HREF="#IMSTAT">IMSTAT</A>
<LI><A HREF="#IRDISP">IRDISP</A>
<LI><A HREF="#IRSFLOAD">IRSFLOAD</A>
<LI><A HREF="#IRSFOUT">IRSFOUT</A>
<LI><A HREF="#IRSFSAVE">IRSFSAVE</A>
<LI><A HREF="#IR_ASTDISP">IR_ASTDISP</A>
<LI><A HREF="#IR_CNTRD">IR_CNTRD</A>
<LI><A HREF="#IR_DISP">IR_DISP</A>
<LI><A HREF="#IR_GETWINPOS">IR_GETWINPOS</A>
<LI><A HREF="#IR_KBDHNDLR">IR_KBDHNDLR</A>
<LI><A HREF="#IR_PRINTFRAME">IR_PRINTFRAME</A>
<LI><A HREF="#IR_ROAM">IR_ROAM</A>
<LI><A HREF="#IR_WIDGETS">IR_WIDGETS</A>
<LI><A HREF="#IR_WIDGETS2">IR_WIDGETS2</A>
<LI><A HREF="#IR_WIDGETS3">IR_WIDGETS3</A>
<LI><A HREF="#LEGEND">LEGEND</A>
<LI><A HREF="#LINEBAR">LINEBAR</A>
<LI><A HREF="#MKFCHART[1]">MKFCHART[1]</A>
<LI><A HREF="#MKFCHART[2]">MKFCHART[2]</A>
<LI><A HREF="#MROGUIDE">MROGUIDE</A>
<LI><A HREF="#MYMMM">MYMMM</A>
<LI><A HREF="#OBJCENOM">OBJCENOM</A>
<LI><A HREF="#PICKFILE">PICKFILE</A>
<LI><A HREF="#PIXEDIT">PIXEDIT</A>
<LI><A HREF="#PIXEDIT2">PIXEDIT2</A>
<LI><A HREF="#PRINTPATH">PRINTPATH</A>
<LI><A HREF="#PSCLOSE">PSCLOSE</A>
<LI><A HREF="#PSLANDFIX">PSLANDFIX</A>
<LI><A HREF="#PSOUT">PSOUT</A>
<LI><A HREF="#QAPER">QAPER</A>
<LI><A HREF="#QPHOT">QPHOT</A>
<LI><A HREF="#QUICKSPLIT">QUICKSPLIT</A>
<LI><A HREF="#QUICKSPLIT2">QUICKSPLIT2</A>
<LI><A HREF="#RADPROF[1]">RADPROF[1]</A>
<LI><A HREF="#RADPROF[2]">RADPROF[2]</A>
<LI><A HREF="#RDLINES">RDLINES</A>
<LI><A HREF="#SETPS">SETPS</A>
<LI><A HREF="#SKYCALC">SKYCALC</A>
<LI><A HREF="#SKYCHECK1">SKYCHECK1</A>
<LI><A HREF="#SKYHORIZ">SKYHORIZ</A>
<LI><A HREF="#SKYLINE122">SKYLINE122</A>
<LI><A HREF="#SKYPOS[1]">SKYPOS[1]</A>
<LI><A HREF="#SKYPOS[2]">SKYPOS[2]</A>
<LI><A HREF="#SKY_VALUE">SKY_VALUE</A>
<LI><A HREF="#SLITREAD">SLITREAD</A>
<LI><A HREF="#SPILIST">SPILIST</A>
<LI><A HREF="#SPLFIT">SPLFIT</A>
<LI><A HREF="#SPLIE2">SPLIE2</A>
<LI><A HREF="#SPLIN2">SPLIN2</A>
<LI><A HREF="#SPLINEFIT">SPLINEFIT</A>
<LI><A HREF="#SPLINF">SPLINF</A>
<LI><A HREF="#SPLINT">SPLINT</A>
<LI><A HREF="#STARCHCK">STARCHCK</A>
<LI><A HREF="#STARCHCK122">STARCHCK122</A>
<LI><A HREF="#STAREO">STAREO</A>
<LI><A HREF="#STARFIT">STARFIT</A>
<LI><A HREF="#STDEV">STDEV</A>
<LI><A HREF="#STRDEL">STRDEL</A>
<LI><A HREF="#STRN">STRN</A>
<LI><A HREF="#STRNSIGNIF">STRNSIGNIF</A>
<LI><A HREF="#SUNRISESET">SUNRISESET</A>
<LI><A HREF="#SXHREAD">SXHREAD</A>
<LI><A HREF="#SXPAR">SXPAR</A>
<LI><A HREF="#TVBALL">TVBALL</A>
<LI><A HREF="#UIT_SKY_VALUE">UIT_SKY_VALUE</A>
<LI><A HREF="#UJCHART">UJCHART</A>
<LI><A HREF="#UNRED">UNRED</A>
<LI><A HREF="#USER_KBD">USER_KBD</A>
<LI><A HREF="#VECT">VECT</A>
<LI><A HREF="#WAVG">WAVG</A>
<LI><A HREF="#WFPC2LIST">WFPC2LIST</A>
<LI><A HREF="#WFPCMRG">WFPCMRG</A>
<LI><A HREF="#WHICH">WHICH</A>
<LI><A HREF="#WHITESKY">WHITESKY</A>
<LI><A HREF="#WIN_INIT">WIN_INIT</A>
<LI><A HREF="#XMESSAGE">XMESSAGE</A>
<LI><A HREF="#YESNO2">YESNO2</A>
</UL><P>
 
<HR>
 
<H1>Routine Descriptions</H1>
<A NAME="A10READ">
<H2>A10READ</H2></A>
<A HREF="#APOGETINST">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	A10READ

 PURPOSE:
	Compare coordinates of stars in a GSC (gsclist) file and a USNO-A1.0
	(a10list) file.

 CATEGORY:
	Catalog software

 CALLING SEQUENCE:
	a10read,a10file,data

 INPUTS:
	a10file: The filename of an USNO-A1.0 extraction
		which contains the target field and the surrounding region.

 OUTPUTS:
	data:	Array containing A1.0 catalog data.  e.g.:
	 RA (deg)  2000  Dec (deg)  B mag  R mag  Field  GSC?  Err?  Zone
	 ------------  -----------  -----  -----  -----  ----  ----  ----
	   267.148225   -37.177994   22.8   18.1    393     0     0   525
	   267.148233   -37.326064   23.9   18.7    393     0     0   525

 PROCEDURE:

 EXAMPLE:

 MODIFICATION HISTORY:
	01/03/97 Written by E. Deutsch
	01/14/98 Modified to autodetect and also read HTML format.  E. Deutsch

</PRE><P>
<STRONG>(See tmp1/a10read.pro)</STRONG><P>
<HR>
 
<A NAME="APOGETINST">
<H2>APOGETINST</H2></A>
<A HREF="#A10READ">[Previous Routine]</A>
<A HREF="#APOGUIDE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 APO SOFTWARE

 will read an instrument block to get details of the instrument and guider

</PRE><P>
<STRONG>(See tmp1/apogetinst.pro)</STRONG><P>
<HR>
 
<A NAME="APOGUIDE">
<H2>APOGUIDE</H2></A>
<A HREF="#APOGETINST">[Previous Routine]</A>
<A HREF="#ASTDISP">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	APOGUIDE

 PURPOSE:
	Generate a guide star acquisition map for the APO guider camera.
	See the separate instruction sheet for complete instructions:
	(http://www.astro.washington.edu/deutsch/apoinfo/guider/guideacq.txt)

 CATEGORY:
	APO software

 CALLING SEQUENCE:
	apoguide,instrument,coords [,dssfile=,gscfile=,/ps,objname=]

 INPUTS:
	instrument: A string specifying the desired primary instrument.
		Current choices are: dis, grim, dsc

	coords: A string containing the J2000 coordinates of the target
		onject in sexigesimal format.

 OPTIONAL INPUT KEYWORDS:
	dssfile: The filename of a Digital Sky Survey (DSS) FITS image which
		contains the field and the surrounding region.

	gscfile: The filename of an HST Guide Star Catalog (GSC) extraction
		which contains the target field and the surrounding region.
		Note that since the limiting magnitude of the GSC is variable
		around 14th magnitude, the GSC is almost necessary.

	a10file: The filename of an USNO-A1.0 extraction
		which contains the target field and the surrounding region.

	ps:	If this keyword is set, the the output is directed to the
		PostScript file 'gdracq.ps' instead of the screen.  Alternately
		this keyword can be set to a string which is the filename.

	objname: A string which will be printed out as an object name at the
		top of a PostScript map.

	suggest: If this keyword is set (default), a list of GSC stars in
		the annulus is listed in brightness order.  If ps is
		set, then the output is written to a file called suggest.dat

	InstAng: Specify the desired Instrument Angle; the default is 0.

 OUTPUTS:
	None.

 COMMON BLOCKS:
	None.

 SIDE EFFECTS:
	None.

 RESTRICTIONS:
	None.

 PROCEDURE:
	Load DSS image if provided, rotate and display an appropriate region.
	Load GSC list if provided, display star symbols.  Finally, overlay
	the acquisition field map and labels.

 EXAMPLE:
	window,colors=50,xs=512
	whitesky,res='RED'
	coords='19 15 11.52  +10 56 45.1'
	apoguide,'DIS',coords,dssfile='test08zr.fits',gscfile='test.gsclst'
	 (see separate instruction sheet for complete details)

 MODIFICATION HISTORY:
	5/05/95 Written by E. Deutsch
	5/20/95 Changed Guider Instrument offsets to 5/15/95 instrument
	        block values.
	7/11/95 Added default dsshdrfile variable.  E. Deutsch
	9/13/95 Improved background level determination.  E. Deutsch
	10/11/95 Made major changes to the logic.  Now uses actual
		Instrument Blocks as input.  New verified with
		actual observations.  E. Deutsch
	10/20/95 Added coordinate grid labels.  E. Deutsch
	10/25/95 Fixed some rouning errors in thr coordinate grid labels,
		and added rotator angle numbers for GRIM.  Also modified the
		image stretch algoritm back to imscl().  E. Deutsch
	11/20/95 Removed bad column graphic for SS512.  E. Deutsch
	04/17/96 Updated labels or other various things to conform to the
		new convention of rotator angle.  E. Deutsch
	05/05/96 Tidied up some of the angles stuff after updating the
		inst blocks.  Also added the /----X graphics, although
		I kind of doubt that they're right.  E. Deutsch
	09/24/96 Added code to support SPICAM.  E. Deutsch
	09/24/96 Added code for the X,Y orientation of the cameras.  E. Deutsch
	10/25/96 Changed the behavior of GC_GIm_ang to something a little
		more correct, although it is far from understood.  E. Deutsch
	10/25/96 Made lots of other transformation changes.  I think it
		is more correct than it was, but there are still problems.  E. Deutsch
	12/31/96 Added support of the USNO-A1.0 catalog.  E. Deutsch

</PRE><P>
<STRONG>(See tmp1/apoguide.pro)</STRONG><P>
<HR>
 
<A NAME="ASTDISP">
<H2>ASTDISP</H2></A>
<A HREF="#APOGUIDE">[Previous Routine]</A>
<A HREF="#ASTROM">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   ASTDISP
 DESCRIPTION:
   This procedure prints of the X,Y,RA,DEC,DN in a standard format.  X,Y must
   be supplied.  RA,DEC may also be supplied, and a DN may also be supplied.
   With use of the Coords= keyword, a string containing the formatted data
   can be returned in addition or instead (with /silent) of printing.
 INPUT:
   X         The X pixel coordinate
   Y         The Y pixel coordinate
 OPTIONAL INPUT:
   RA        Right Ascention
   DEC       DEClination  (if RA is supplied, DEC must also be supplied)
   DN        Data Number
 OPTIONAL INPUT KEYWORDS:
   SILENT    Prevents printing.  Only useful when used with Coords=
 OUTPUT:
   Printed positions in both degrees and sexigesimal format
   All passed variables remain unchanged
 OPTIONAL KEYWORD OUTPUT:
   COORDS    Returns the formatted coordinates in a string
 HISTORY:
   10-AUG-90 Version 1 written by Eric W. Deutsch
   20-AUG-91 Converted to standard header.  Vectorized Code.  E. Deutsch
   20-NOV-92 Added Coords= and /silent.  E.Deutsch
</PRE><P>
<STRONG>(See tmp1/astdisp.pro)</STRONG><P>
<HR>
 
<A NAME="ASTROM">
<H2>ASTROM</H2></A>
<A HREF="#ASTDISP">[Previous Routine]</A>
<A HREF="#ASTROMIT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	ASTROM
 PURPOSE:
	Computes parameters describing a linear fit to a plate    
	solution using the algorithm supplied by R. S. HARRINGTON, USNO
	Use the procedure ASTROMIT for interactive use of this program

 CALLING SEQUENCE:
	astrom, raref, decref, idgs, ximg, yimg, astr, err, [ fl ,
				/NOQUESTIONS, DUMPTYPE= ]

 INPUTS:
	raref - Array of RA'S of astrometric reference stars (DEGREES)
	decref- Array of DEC'S of astrometric reference stars (DEGREES)
	idgs  - Array of indices of selected reference stars.  IDGS must
		contain the same or fewer elements than RAREF and DECREF.
		If the total # of reference stars is N, then to select
		all the reference stars, set IDGS = INDGEN(N)
	ximg  - Array of image source X COORDS.                  
	yimg  - Array of image source Y COORDS.
	astr  - A structure, of type ASTROMETRY, containing the initial guess
		at the plate solution.

 OPTIONAL INPUTS:
	fl    - Camera Focal Length (in pixel units).  If omitted, a focal
		length of 1.7E5 (UIT camera) will be assumed
 KEYWORDS:
	NOQUESTIONS - If set, user will not be asked 'Ren/Del/Cont'
	DUMPTYPE    - If 0, printed information will NOT be dumped.  If 1,
		printed information will be dumped to ASTROM.DMP in the
		same format as the screen.  If 2, a higher precision and
		sexigesimal format will be dumped to file ASTROM.DMP.
		DumpType=2 is noticeably slower...
 OUTPUTS:
	astr  - The input ASTROMETRY structure is filled with the just-computed
		plate solution.
	err   - (output) error in star location (measured - calc) in arcsec   
		Same number of elements as IDGS

 REVISION HISTORY:
	Written  by J. K. HILL, STX CORP.                        7/11/86  
	Converted to IDL, made interactive by R. H. CORNETT, STX 5/29/87
	03-SEP-90 Fixed Error calculation and made it dump in to file. (Deutsch)
	Added option to delete or rename output file, J. Isensee, ST Systems Corp.
	Added Calling sequence message, N. Collins, STX, 11/20/90
	20-AUG-91 Fixed Error calculation by removing extra SQRT inserted in
	line 161 probably when the ERR variable was changed to ERROUT by someone.
	Therefore, all error values were wrong, probably since 11/20/90.  Also
	changed variable ERROUT back to ERR because only SOME of the ERRs had
	been changed, which gave more errors.       (E. Deutsch)
	20-AUG-91 Added /NoQues parameter to avoid Del/Ren Prompt.  (E. Deutsch)
	24-AUG-91 Added DumpType= keyword and corresponding code.   (E. Deutsch)
	24-AUG-91 Changed Dumpfile Unit=8 to /get_lun               (E. Deutsch)
 	Fixed the returned ERR array.  The square of the errors was being
	returned; a square root is now taken prior to returning.  The displayed
	error analysis is not affected.  M. R. Greason, Hughes STX, 
	10 December 1992.
	Converted to the new, image-distortion-related, astrometry scheme.
	Reformatted the procedure and beefed up the internal documentation.
	M. R. Greason, Hughes STX, 6 January 1993.
	Fixed variable-name error.  RSH, HSTX, 25-Mar-93
	New astrometry software WBL HSTX  Feb 94
</PRE><P>
<STRONG>(See tmp1/astrom.pro)</STRONG><P>
<HR>
 
<A NAME="ASTROMIT">
<H2>ASTROMIT</H2></A>
<A HREF="#ASTROM">[Previous Routine]</A>
<A HREF="#BINARIES">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	ASTROMIT
 PURPOSE:
	Uses the procedure ASTROM to derive an astrometry solution from a 
	set of reference star positions and coordinates.  The reference stars 
	may be culled interactively to obtain the best astrometric solution.     
	The procedure writes to a file ASTROM.DMP during each iteration.

 CALLING SEQUENCE:
	ASTROMIT, X, Y, A, D [, HDR, FL, /UNDISTORT]

 INPUTS:
	X - Vector (at least 3 elements) containing the X positions of a set
		of astrometric reference stars
	Y - Vector containing Y positions of reference stars
	A - Vector (same # of elements as X) containing the Right Ascension 
		(decimal degrees) of the astrometric reference stars
	D - Vector containing declinations (decimal degrees) of reference stars

 OPTIONAL INPUTS:
	HDR - Image header which may be updated with the astrometric solution.
	FL  - Camera focal length.  If not supplied, a focal length appropriate
		to UIT is assumed
 KEYWORDS:
	UNDISTORT - If present and non-zero, the reference star (x,y) positions
		are assumed to have been corrected for image distortion
		(transformed into the undistorted frame of reference).  THIS
		KEYWORD SHOULD ONLY BE USED FOR UIT IMAGES.
 METHOD:
	The procedure ASTROM is called (twice) to compute an initial astrometry
	solution.  The errors in the initial solution are then displayed for
	each reference star.  The user then has the option of culling the
	the reference star list, either by setting a maximum tolerable error
	or by removing individual stars.
 NOTES:
	ASTROMIT will write the results of each iteration to a file ASTROM.DMP.
	However, under Unix only the final iteration is saved.

 PROCEDURES USED:
	ZPARCHECK,ASTROM,PUTAST,STRN,STRNUMBER,SXADDHIST
 REVISION HISTORY:
	Written R. Cornett, W. Landsman               January 1988
	Fixed to allow header updates if npar GE 5, B Pfarr, June 1989
	20-AUG-91 Fixed so that it correctly puts residual in header.  (E. Deutsch)
	24-AUG-91 Modified to work with latest mods to ASTROM.         (E. Deutsch)
	Corrected ASTROM bug, requiring a change in how the residual is put into
	the header.  M. R. Greason, Hughes STX, 10 December 1992.
	Converted to the new, image-distortion-related, astrometry scheme.
	Reformatted the procedure and beefed up the internal documentation.
	M. R. Greason, Hughes STX, 6 January 1993.
	Fixed misnomers in calling sequence, bug in ctype handling, a couple
	of instances of not including the structure name astr.  
	RSH, HSTX, 25-Mar-93
	Fixed a loop init. and processing.  MRG, HSTX, 8-Apr-1993.
	Individual star deletion fixed (`where' added).  RSH, HSTX, 18 June 1993.
</PRE><P>
<STRONG>(See tmp1/astromit.pro)</STRONG><P>
<HR>
 
<A NAME="BINARIES">
<H2>BINARIES</H2></A>
<A HREF="#ASTROMIT">[Previous Routine]</A>
<A HREF="#BLACKSKY">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 A sample program to fool around with binaries star systems
</PRE><P>
<STRONG>(See tmp1/binaries.pro)</STRONG><P>
<HR>
 
<A NAME="BLACKSKY">
<H2>BLACKSKY</H2></A>
<A HREF="#BINARIES">[Previous Routine]</A>
<A HREF="#BSCENTRD">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   BLACKSKY
 PURPOSE:
   Changes current color table to white on black.
 CALLING SEQEUNCE:
   BlackSky
 INPUT:
   none
 OUTPUT:
   Changes current color table and updates color table COMMON block.
 HISTORY:
   17-NOV-92 Header added to old routine  (E. Deutsch)
   11-JAN-93 Changed name from POS to BLACKSKY  (E. Deutsch)
   04-APR-94 Added proper handling when !d.n_colors is low.  (E. Deutsch)
   29-APR-97 Added limit of !d.n_colors=256.  (E. Deutsch)
</PRE><P>
<STRONG>(See tmp1/blacksky.pro)</STRONG><P>
<HR>
 
<A NAME="BSCENTRD">
<H2>BSCENTRD</H2></A>
<A HREF="#BLACKSKY">[Previous Routine]</A>
<A HREF="#BUILDAST">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME: 
   BSCENTRD
 PURPOSE:
   Compute "center of mass" centroid coordinates of a stellar object.  This
   procedure is considerable slower than the Astronomy libraries' CNTRD
   procedure, but yields much better results for small "BAD STARS", i.e.
   small scruffy objects which don't necessarily have a good shape.  It also
   avoids the CNTRD problem of ignoring a small star next to a much brighter
   one even if the exact coordinates are supplied.  Results seem to be of
   comperable accuracy (based on comaprisons of residuals when transferring
   solutions to higher resolution images) on bright sources and can measure
   many sources CNTRD is not capable of.  Careful study of results of this
   algorithm versus other popular ones still needs to be done.  In general,
   results are quite good, actually.  The author uses is for ALL measurement
   work, not just "BAD STARS".
 CALLING SEQUENCE: 
   BSCENTRD,img,xguess,yguess,xcen,ycen,[FWHM],[/INFO]
 INPUTS:     
   IMG      Two dimensional image array
   XGUESS   Scalar giving approximate X stellar center
   YGUESS   Scalar giving approximate Y stellar center
 OPTIONAL OUTPUT:
   FWHM     Returned approximate FWHM.  Not terribly accurate.  Needs work.
 OUTPUTS:   
   XCEN     The computed X centroid position.  -1 if unable to centroid
   YCEN     The computed Y centroid position.  -1 if unable to centroid
  OPTIONAL OUTPUT KEYWORDS:
   INFO     If set, BScentrd prints out some informational statistics.  They
              are pretty good for small stars but not for large stars.
              This needs some work, too.
 PROCEDURE: 
   Nearest peak to the specified GUESS coordinates is determined.  Appriximate
   extent of star is determined and nearby stars are masked out.  Center of
   "mass" of the remaining star information is returned.
 MODIFICATION HISTORY:
   06-JUN-90 Written by Eric Deutsch
             numerous undocumented adjustments made over time
   04-APR-93 Header spiffed up for release.  EWD.
</PRE><P>
<STRONG>(See tmp1/bscentrd.pro)</STRONG><P>
<HR>
 
<A NAME="BUILDAST">
<H2>BUILDAST</H2></A>
<A HREF="#BSCENTRD">[Previous Routine]</A>
<A HREF="#CALC_A">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
  NAME:
	BUILDAST
  PURPOSE:
	Build an ASTROMETRY structure from given data.  If data are not
	supplied, prompt for all necessary.  A CD matrix must be supplied and
	will not be prompted.

  CALLING SEQUENCE:
	ASTR = BUILDAST( CD, [CRPIX, CRVAL, CType, Flag, Cam, Equinox, $
			/RADIANS,SCALE=scl,OFFSET=offst])

  INPUTS:
   	CD   - 2 x 2 array containing the astrometry parameters CD1_1 CD1_2
   	      	in DEGREES/PIXEL                                CD2_1 CD2_2
	CRPIX - 2 element vector giving X and Y coord of reference pixel
	CRVAL - 2 element vector giving R.A. and DEC of reference pixel 
       	in DEGREES
	CTYPE - 2 element vector giving dimension types (Nominally "RA--TAN",
		"RA--UIT", "DEC--TAN","DEC--UIT")  (Defaults to "*--TAN")
	FLAG - String containing "T" if plate solution requires a distortion
		to match the plate, "F" if not. (Defaults to "F")
	CAM -  String containing the UIT camera of the image ("A", "B" or "").
		(Defaults to "")
       EQUINOX- Scalar containing the equinox of astrometry coordinates 
               (Defaults to 2000).

  KEYWORD INPUT:
	RADIANS - If present and non-zero, assumes that the input CD and CRVAL
		are in RADIANS, not DEGREES.
       SCALE - Scalar containing the multiplicative scale factor of the image
               (e.g. 4.0 for a 512x512 compressed UIT image).  If not 
		supplied, default value of 1 assumed (SCALE=0 ignored).
       OFFSET - 2 element vector containing the X and Y offsets needed to put
               the CRPIXes at (1024.5,1024.5) AFTER scaling.  If not supplied,
		default value of [0,0] assumeed.

  OUTPUT:
     Function value = ASTROMETRY structure, containing:
   	.CD   -  2 x 2 array containing the astrometry parameters CD1_1 CD1_2
   	      	 in DEGREES/PIXEL                                 CD2_1 CD2_2
	.CRPIX - 2 element vector giving X and Y coordinates of reference pixel
	.CRVAL - 2 element vector giving R.A. and DEC of reference pixel 
       	 in DEGREES
	.CTYPE - 2 element vector giving dimension types (Nominally "RA---TAN"
		 or "RA---UIT", "DEC--TAN","DEC--UIT")
	.FLAG -  String containing "T" if plate solution requires a distortion
		 to match the plate, "F" if not.
	.CAM -   String containing the UIT camera of the image ("A" or "B","N"
		 or blank if not a UIT image).
       .EQUINOX- Scalar containing equinox of CRVAL coordinates (def=2000)
	.SCALE - Scalar containing the multiplicative scale factor of the image
		 (e.g. 4.0 for a 512x512 compressed UIT image).  Will be 1.0
		 if not a UIT image.
	.OFFSET - 2 element vector containing the X and Y offsets needed to put
		 the CRPIXes at (1024.5,1024.5) AFTER scaling.  Will be [0,0] 
		 if not a UIT image.
  PROCEDURE:
	Routine prompts for any missing parameters (CD matrix must be 
	supplied).
	Once values for all fields are complete, the routine will build an
	ASTROMETRY structure and return it.
  COMMON BLOCKS:
	None

  EXAMPLES:
	IDL> astr = buildast(cd, crpix, crval)	;Prompts for other values
	IDL> putast,hdr, buildast(cd, cp, cv, ct, f, cam, equ) ;Puts astrometry
								into header hdr
  MODIFICATION HISTORY:
	Written.  Joel D. Offenberg, Hughes STX, January, 1993.
       All numerics floated.  RSH, HSTX, 22-Apr-1993.
       Degrees converted to radians for entered CRVALs.  RSH, HSTX,
          23-Apr-1993.
	Now able to handle IRAS headers (3 CTYPES, 3 CRPIX---just ignore the 
	third.)		JDO, HSTX, May 26, 1993
</PRE><P>
<STRONG>(See tmp1/buildast.pro)</STRONG><P>
<HR>
 
<A NAME="CALC_A">
<H2>CALC_A</H2></A>
<A HREF="#BUILDAST">[Previous Routine]</A>
<A HREF="#CALC_ZDHA">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   CALC_A
 PURPOSE:
   Returns the extinction of the supplied wavelength and E(B-V) using the
   Seaton Extinction curve through the UNRED procedure.
 CALLING SEQEUNCE:
   Calc_A,wavelenth,[EBmV],[value=value]
 INPUT:
   WAVELENTH This must be the scalar wavelength for which the extinction
               is to be calculated (in Angstroms).
 OPTIONAL INPUT:
   EBmV      This scalar contains the optional value for E(B-V).  If this
               value is not supplied the factor times which E(B-V) should
               be multiplied by is returned.
   SILENT    This Keyword, if set, prevents the result from being displayed.
 OPTIONAL OUTPUT:
   VALUE     If this keyword is supplied the value is returned into this
               variable.
 HISTORY:
   17-NOV-92 Header added to old routine  (E. Deutsch)
</PRE><P>
<STRONG>(See tmp1/calc_a.pro)</STRONG><P>
<HR>
 
<A NAME="CALC_ZDHA">
<H2>CALC_ZDHA</H2></A>
<A HREF="#CALC_A">[Previous Routine]</A>
<A HREF="#CHARLIST">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   calc_ZDHA
 PURPOSE:
   Calculate Zenith distance and Hour Angle and Azimuth given local standard
   time, latitude, longitude, ra, and dec.
 CALLING SEQEUNCE:
   calc_ZDHA,lst,latitude,longitude,ra,dec,ZD,HA,AZ
</PRE><P>
<STRONG>(See tmp1/calc_zdha.pro)</STRONG><P>
<HR>
 
<A NAME="CHARLIST">
<H2>CHARLIST</H2></A>
<A HREF="#CALC_ZDHA">[Previous Routine]</A>
<A HREF="#CLEANEXAMINE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   CHARLIST
 PURPOSE:
   This program opens a file called 'charlist.dat' and then writes out lines
   0 through 255, where each line contains somthing like 'ascii  65 = "A"'.
   It is sometimes handy to have a file which contains every possible ascii
   character.
 CALLING SEQEUNCE:
   charlist
</PRE><P>
<STRONG>(See tmp1/charlist.pro)</STRONG><P>
<HR>
 
<A NAME="CLEANEXAMINE">
<H2>CLEANEXAMINE</H2></A>
<A HREF="#CHARLIST">[Previous Routine]</A>
<A HREF="#CMPWINSHO">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   CLEANEXAMINE
 PURPOSE:
   This procedure is designed to aid in the examination of the results of
   of a run of IMGclean, although there are other uses for the program.
   In addition to "examining" the difference between the two images, one
   can edit and replace to remove CR's that IMGclean missed and also fix
   mistakes where IMGclean damaged a star.
 EXAMPLE:
   IDL> IMGread,imgorig,horig,'w0c0401t.c0h',2
   IDL> img=imgorig & h=horig
   IDL> IMGclean,img,h,cr
   IDL> cleanexamine,imgorig,img,cr

 HISTORY
   93-APR-01  Finally added header to this procedure.  Eric Deutsch
   97-MAY-27  Complete rework.  Eric Deutsch
</PRE><P>
<STRONG>(See tmp1/cleanexamine.pro)</STRONG><P>
<HR>
 
<A NAME="CMPWINSHO">
<H2>CMPWINSHO</H2></A>
<A HREF="#CLEANEXAMINE">[Previous Routine]</A>
<A HREF="#CONTRAST">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 This procedure handles various modes of display of the compressed image
 in the IMGroam environment.  It is not useful by itself.

</PRE><P>
<STRONG>(See tmp1/cmpwinsho.pro)</STRONG><P>
<HR>
 
<A NAME="CONTRAST">
<H2>CONTRAST</H2></A>
<A HREF="#CMPWINSHO">[Previous Routine]</A>
<A HREF="#CONV_MAIL">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	CONTRAST
 PURPOSE:
	Use the mouse to change the slope and Y intercept of the color
	lookup table on an X windows display. 

 CALLING SEQUENCE:
	CONTRAST, [ cont ]

 OPTIONAL INPUT:
	CONT - If this optional parameter is supplied and non-zero, then
		CONTRAST is initialized by placing the cursor at the position 
		of the previous call to CONTRAST.    Otherwise, CONTRAST 
		initializes with the cursor in the center of the image.

 OUTPUT:
	None

 SIDE EFFECTS:
	Mouse button enabled:	LEFT - Reverses black and white
				RIGHT - Exit

 PROCEDURE:
	The y position (0-!D.Y_SIZE) is converted into a slope of range -10 
	to 10 by using a tangent function.  The x position (0-!D.X_SIZE) is 
	converted into a Y-intercept range of -128 to 128.

 COMMON BLOCKS:
	The COLORS common block (see LOADCT) store the modified color table
	The CONTRAST common block stores the final position of the cursor.

 REVISION HISTORY:  
	Adapted from IVAS version on contrast, B. Pfarr, STX, 1/91
	Added CONT parameter   W. Landsman       STX    August, 1991
</PRE><P>
<STRONG>(See tmp1/contrast.pro)</STRONG><P>
<HR>
 
<A NAME="CONV_MAIL">
<H2>CONV_MAIL</H2></A>
<A HREF="#CONTRAST">[Previous Routine]</A>
<A HREF="#CRD">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   CONV_MAIL
 PURPOSE:
   This procedure converts a VMS mail folder to a unix-compatible mail folder.
 CALLING SEQEUNCE:
   VMSMAIL> set folder mail 
   VMSMAIL> extract/all vms.mailfol 
   Call> conv_mail,searchspec'
   e.g.> conv_mail,'*.mailfol'"
 INPUT:
   SEARCHSPEC  Search specification for files to be converted.
 MODIFICATION HISTORY:
	01-AUG-95 Added properly handling on lines beginning with "From " in
		the message body.   E. Deutsch
</PRE><P>
<STRONG>(See tmp1/conv_mail.pro)</STRONG><P>
<HR>
 
<A NAME="CRD">
<H2>CRD</H2></A>
<A HREF="#CONV_MAIL">[Previous Routine]</A>
<A HREF="#CREATEF">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   CRD
 PURPOSE:
   This program reads and prints the x,y coordinates of the position of
   the mouse click in an IDL window.
 CALLING SEQEUNCE:
   crd
   crd,[/data,/normal,/device]
   crd,x,y,[/data,/normal,/device]
</PRE><P>
<STRONG>(See tmp1/crd.pro)</STRONG><P>
<HR>
 
<A NAME="CREATEF">
<H2>CREATEF</H2></A>
<A HREF="#CRD">[Previous Routine]</A>
<A HREF="#DEFANSI">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 This procedure handles the extraction of the desired image from the total
 image in the IMGroam environment.  It is not useful by itself.

</PRE><P>
<STRONG>(See tmp1/createf.pro)</STRONG><P>
<HR>
 
<A NAME="DEFANSI">
<H2>DEFANSI</H2></A>
<A HREF="#CREATEF">[Previous Routine]</A>
<A HREF="#DELAST">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   DEFANSI
 DESCRIPTION:
   This procedure defines a few ANSI screen control sequences and puts
   them in a COMMON block.  To use these sequences, include the COMMON
   block at the beginning of the procedure and call the procedure.
 CALLING SEQUENCE:
   DefANSI,define
 INPUT:
   DEFINE    The variable controls whether the sequences are defined or
               cleared.  (0=Clear,1=Define) (Default=Defined=1)
               It is desirable to clear the ANSI variables when doing a HELP,
               because they cause the display to beep, clear, etc.
 OUTPUT:
   COMMON ANSI,CR,LF,esc,UP,CLRSCRN,BELL,DOWN,RIGHT,LEFT,NORMAL,BOLD, $
     REVERSE,BLINKING
 HISTORY:
   03-JUL-90 Version 1 written by Eric Deutsch
   24-AUG-91 Added a few more ANSI sequences   (E. Deutsch)
</PRE><P>
<STRONG>(See tmp1/defansi.pro)</STRONG><P>
<HR>
 
<A NAME="DELAST">
<H2>DELAST</H2></A>
<A HREF="#DEFANSI">[Previous Routine]</A>
<A HREF="#DIAGFIND">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   DELAST
 PURPOSE:
   Deletes all astrometric information from a header.  Mainly useful for
   deleting screwy "astrometry" that IRAF delights in fouling up the
   header with (e.g., "PIXEL", "SYSTEM", etc. CTYPEs)
 CALLING SEQEUNCE:
   delast,header
</PRE><P>
<STRONG>(See tmp1/delast.pro)</STRONG><P>
<HR>
 
<A NAME="DIAGFIND">
<H2>DIAGFIND</H2></A>
<A HREF="#DELAST">[Previous Routine]</A>
<A HREF="#DIAGMARK">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   DIAGFIND
 PURPOSE:
   This procedures finds all (or first) star(s) within 0.1 magnitudes of 
   a cursor click on the CM diagram output of diagram.pro and prints out
   relevant lines and draws arrow to object.
 CALLING SEQEUNCE:
   diagfind,diagramoutfile,[x=,y=,/first]
 INPUT:
   DIAGRAMOUTFILE  Output file of diagram.pro.  Typically diagram.out.
 OPTIONAL KEYWORD:
   X      Returned X value.
   Y      Returned Y value.
   FIRST  Set theis flag to 1 if the program should stop looking after the
          first match instead of looking for all matches.
</PRE><P>
<STRONG>(See tmp1/diagfind.pro)</STRONG><P>
<HR>
 
<A NAME="DIAGMARK">
<H2>DIAGMARK</H2></A>
<A HREF="#DIAGFIND">[Previous Routine]</A>
<A HREF="#DIAGRAM">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   DIAGMARK
 PURPOSE:
   This procedures finds all stars within radius pixels of x,y and draws
   a line to it on the output window of diagram.pro
 CALLING SEQEUNCE:
   diagmark,infile,xc,yc,radius
 INPUT:
   INFILE  Output file of diagram.pro.  Typically diagram.out.
   X       X coordinate of star to look for.
   Y       Y coordinate of star to look for.
   RADIUS  Search radius about X,Y
</PRE><P>
<STRONG>(See tmp1/diagmark.pro)</STRONG><P>
<HR>
 
<A NAME="DIAGRAM">
<H2>DIAGRAM</H2></A>
<A HREF="#DIAGMARK">[Previous Routine]</A>
<A HREF="#DISBOTH">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   DIAGRAM
 PURPOSE:
   Generate a snazzy color-magnitude diagram with a variety of options
   and input formats.  Everything is controlled via a self-documenting
   parameter file instead of keywords or parameters
 CALLING SEQEUNCE:
   diagram,paramfile,[/ps,/SkipRead,/DontWrite]
 INPUT:
   PARAMFILE This is the name of a diagram.pro parameter file.
 OPTIONAL KEYWORDS:
   PS        Write to Postscript instead of the screen.
   SkipRead  Remember and use the most recently-read dataset.
   DontWrite Don;t bother to write diagram.out and diagram.dmp (much faster).
 HISTORY:
   01-AUG-96 Added Header to program which has been evolving for years
     (E. Deutsch)
</PRE><P>
<STRONG>(See tmp1/diagram.pro)</STRONG><P>
<HR>
 
<A NAME="DISBOTH">
<H2>DISBOTH</H2></A>
<A HREF="#DIAGRAM">[Previous Routine]</A>
<A HREF="#DISCALC">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 No formal header yet.  See the documentation in
   http//www.astro.washington.edu/deutsch/apoinfo.html
</PRE><P>
<STRONG>(See tmp1/disboth.pro)</STRONG><P>
<HR>
 
<A NAME="DISCALC">
<H2>DISCALC</H2></A>
<A HREF="#DISBOTH">[Previous Routine]</A>
<A HREF="#DISCALSP">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 No formal header yet.  See the documentation in
   http//www.astro.washington.edu/deutsch/apoinfo.html
</PRE><P>
<STRONG>(See tmp1/discalc.pro)</STRONG><P>
<HR>
 
<A NAME="DISCALSP">
<H2>DISCALSP</H2></A>
<A HREF="#DISCALC">[Previous Routine]</A>
<A HREF="#DISCALSP2">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 No formal header yet.  See the documentation in
   http//www.astro.washington.edu/deutsch/apoinfo.html
</PRE><P>
<STRONG>(See tmp1/discalsp.pro)</STRONG><P>
<HR>
 
<A NAME="DISCALSP2">
<H2>DISCALSP2</H2></A>
<A HREF="#DISCALSP">[Previous Routine]</A>
<A HREF="#DISCALSPHR">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 No formal header yet.  See the documentation in
   http//www.astro.washington.edu/deutsch/apoinfo.html
</PRE><P>
<STRONG>(See tmp1/discalsp2.pro)</STRONG><P>
<HR>
 
<A NAME="DISCALSPHR">
<H2>DISCALSPHR</H2></A>
<A HREF="#DISCALSP2">[Previous Routine]</A>
<A HREF="#DISFINDSPEC">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 No formal header yet.  See the documentation in
   http//www.astro.washington.edu/deutsch/apoinfo.html
</PRE><P>
<STRONG>(See tmp1/discalsphr.pro)</STRONG><P>
<HR>
 
<A NAME="DISFINDSPEC">
<H2>DISFINDSPEC</H2></A>
<A HREF="#DISCALSPHR">[Previous Routine]</A>
<A HREF="#DISFITCOMPR">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 No formal header yet.  See the documentation in
   http//www.astro.washington.edu/deutsch/apoinfo.html
</PRE><P>
<STRONG>(See tmp1/disfindspec.pro)</STRONG><P>
<HR>
 
<A NAME="DISFITCOMPR">
<H2>DISFITCOMPR</H2></A>
<A HREF="#DISFINDSPEC">[Previous Routine]</A>
<A HREF="#DISFITLINE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
    6532.8824,6598.9529,6717.0428,6929.467]
</PRE><P>
<STRONG>(See tmp1/disfitcompr.pro)</STRONG><P>
<HR>
 
<A NAME="DISFITLINE">
<H2>DISFITLINE</H2></A>
<A HREF="#DISFITCOMPR">[Previous Routine]</A>
<A HREF="#DISHDRFIX">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
  plot,w1,s1,xsty=1,psym=-4
</PRE><P>
<STRONG>(See tmp1/disfitline.pro)</STRONG><P>
<HR>
 
<A NAME="DISHDRFIX">
<H2>DISHDRFIX</H2></A>
<A HREF="#DISFITLINE">[Previous Routine]</A>
<A HREF="#DISLIST">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 No formal header yet.  See the documentation in
   http//www.astro.washington.edu/deutsch/apoinfo.html
</PRE><P>
<STRONG>(See tmp1/dishdrfix.pro)</STRONG><P>
<HR>
 
<A NAME="DISLIST">
<H2>DISLIST</H2></A>
<A HREF="#DISHDRFIX">[Previous Routine]</A>
<A HREF="#DISMKSPCAL">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 No formal header yet.  See the documentation in
   http//www.astro.washington.edu/deutsch/apoinfo.html
</PRE><P>
<STRONG>(See tmp1/dislist.pro)</STRONG><P>
<HR>
 
<A NAME="DISMKSPCAL">
<H2>DISMKSPCAL</H2></A>
<A HREF="#DISLIST">[Previous Routine]</A>
<A HREF="#DISMKSPCAL2">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 No formal header yet.  See the documentation in
   http//www.astro.washington.edu/deutsch/apoinfo.html
</PRE><P>
<STRONG>(See tmp1/dismkspcal.pro)</STRONG><P>
<HR>
 
<A NAME="DISMKSPCAL2">
<H2>DISMKSPCAL2</H2></A>
<A HREF="#DISMKSPCAL">[Previous Routine]</A>
<A HREF="#DISMKSPCAL3">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 No formal header yet.  See the documentation in
   http//www.astro.washington.edu/deutsch/apoinfo.html
</PRE><P>
<STRONG>(See tmp1/dismkspcal2.pro)</STRONG><P>
<HR>
 
<A NAME="DISMKSPCAL3">
<H2>DISMKSPCAL3</H2></A>
<A HREF="#DISMKSPCAL2">[Previous Routine]</A>
<A HREF="#DISMKSPFLAT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 No formal header yet.  See the documentation in
   http//www.astro.washington.edu/deutsch/apoinfo.html
</PRE><P>
<STRONG>(See tmp1/dismkspcal3.pro)</STRONG><P>
<HR>
 
<A NAME="DISMKSPFLAT">
<H2>DISMKSPFLAT</H2></A>
<A HREF="#DISMKSPCAL3">[Previous Routine]</A>
<A HREF="#DISPBAR">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 No formal header yet.  See the documentation in
   http//www.astro.washington.edu/deutsch/apoinfo.html
</PRE><P>
<STRONG>(See tmp1/dismkspflat.pro)</STRONG><P>
<HR>
 
<A NAME="DISPBAR">
<H2>DISPBAR</H2></A>
<A HREF="#DISMKSPFLAT">[Previous Routine]</A>
<A HREF="#DISREAD">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   DISPBAR
 DESCRIPTION:
   This procedure creates and displays a color bar on the screen.
 CALLING SEQUENCE:
   DISPBAR,cbllx,cblly,cbx,cby,Border=Border
 INPUT:
   CBLLX     Color Bar Lower Left hand X coordinate
   BCLLY     Color Bar Lower left hand Y coordinate
   CBX       Color Bar X length
   CBY       Color Bar Y height
 OUTPUT:
   Screen output only.  All passed variables remain unchanged.
 OPTIONAL FLAGS:
   BORDER    Puts a white (BLACK in PS) border around the color bar.
 HISTORY:
   30-MAY-90 Version 1 written by Eric W. Deutsch
   24-AUG-91 Added /Border Keyword    (E. Deutsch)
</PRE><P>
<STRONG>(See tmp1/dispbar.pro)</STRONG><P>
<HR>
 
<A NAME="DISREAD">
<H2>DISREAD</H2></A>
<A HREF="#DISPBAR">[Previous Routine]</A>
<A HREF="#DISSLIT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 No formal header yet.  See the documentation in
   http//www.astro.washington.edu/deutsch/apoinfo.html
</PRE><P>
<STRONG>(See tmp1/disread.pro)</STRONG><P>
<HR>
 
<A NAME="DISSLIT">
<H2>DISSLIT</H2></A>
<A HREF="#DISREAD">[Previous Routine]</A>
<A HREF="#DISSPEC">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 No formal header yet.  See the documentation in
   http//www.astro.washington.edu/deutsch/apoinfo.html
</PRE><P>
<STRONG>(See tmp1/disslit.pro)</STRONG><P>
<HR>
 
<A NAME="DISSPEC">
<H2>DISSPEC</H2></A>
<A HREF="#DISSLIT">[Previous Routine]</A>
<A HREF="#DOCIRCLE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 No formal header yet.  See the documentation in
   http//www.astro.washington.edu/deutsch/apoinfo.html
</PRE><P>
<STRONG>(See tmp1/disspec.pro)</STRONG><P>
<HR>
 
<A NAME="DOCIRCLE">
<H2>DOCIRCLE</H2></A>
<A HREF="#DISSPEC">[Previous Routine]</A>
<A HREF="#DOFIND">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Read file

</PRE><P>
<STRONG>(See tmp1/docircle.pro)</STRONG><P>
<HR>
 
<A NAME="DOFIND">
<H2>DOFIND</H2></A>
<A HREF="#DOCIRCLE">[Previous Routine]</A>
<A HREF="#DOSTAT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Procedure: DoFind,filename

  This procedure through the output of DoPHOT in the COMPLETE
 format only for an object of the specified coordinates

  dofind,filename,xc,yc,srchrad
</PRE><P>
<STRONG>(See tmp1/dofind.pro)</STRONG><P>
<HR>
 
<A NAME="DOSTAT">
<H2>DOSTAT</H2></A>
<A HREF="#DOFIND">[Previous Routine]</A>
<A HREF="#DRAWCROSS">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Procedure: DoStat,filename

  This procedure returns statistics of the output of DoPHOT in the COMPLETE
 format only!  The number of different object types are counted up and the
 results are printed to the screen.

</PRE><P>
<STRONG>(See tmp1/dostat.pro)</STRONG><P>
<HR>
 
<A NAME="DRAWCROSS">
<H2>DRAWCROSS</H2></A>
<A HREF="#DOSTAT">[Previous Routine]</A>
<A HREF="#EXIST">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   DRAWCROSS
 DESCRIPTION:
   This procedures draws a graphics cursor-like cross centered at the
   supplied X,Y data coordinates.  Size and thickness can be supplied.  the
   /top keyword puts a littel hat on top of the cross as a distinguishing
   mark from a regular cross.
 INPUT:
   XC        The X center coordinate
   YC        The Y center coordinate
   RADIUS    Radial size of the cross
 OPTIONAL INPUT KEYWORDS:
   TOP       Setting /TOP puts a "hat" distinguishing mark on top of cross
   THICK     Sets the thickness of the cross (generally only useful with
               PostScript (high resolution) output).
 OUTPUT:
   Draws cross to current graphics channel
 HISTORY:
   27-MAY-94 Added header and description to old code.  E.Deutsch
</PRE><P>
<STRONG>(See tmp1/drawcross.pro)</STRONG><P>
<HR>
 
<A NAME="EXIST">
<H2>EXIST</H2></A>
<A HREF="#DRAWCROSS">[Previous Routine]</A>
<A HREF="#EXTCAT_AC2000">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   EXIST
 PURPOSE:
   A very simple check to see if a file exists...
 CALLING SEQEUNCE:
   result=exist(filename)'
 INPUT:
   FILENAME  This is the filename or search spec. that should be checked.
 OUTPUT:
   RESULT    The returned result is the number of files which match the
               search spec, and 0 if no file exists.
 EXAMPLE:
   if exist('input.dat') then print,'Yes' else print,'No'
   if not exist('input.dat') then print,'Create'
   result=exist('*.hhh') & print,strn(count),' Header files available'
 NOTES:
   A search spec of multiple files uses `findfile()`.  A search for a
   a single file uses `openr` with an error trap because it is much faster.
   Unreadable files will in that case appear not to exist.
 HISTORY:
   1992-07-27 Header added to old routine  (E. W. Deutsch)
   1999-04-16 Rewritten to be faster and tidier  (E. W. Deutsch)
</PRE><P>
<STRONG>(See tmp1/exist.pro)</STRONG><P>
<HR>
 
<A NAME="EXTCAT_AC2000">
<H2>EXTCAT_AC2000</H2></A>
<A HREF="#EXIST">[Previous Routine]</A>
<A HREF="#EXTRAC">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	EXTCAT_AC2000

 PURPOSE:
	Extract a region out of the AC 2000 CD-ROM.

 CATEGORY:
	Catalog software

 CALLING SEQUENCE:
	extcat_ac2000,outfile,ra,dec,boxwidth

 INPUTS:
	outfile	  Filename of output file
	ra	  Central RA in degrees of box
	dec	  Central DEC in degrees of box
	boxwidth  Width of extraction box in degrees 

 OUTPUTS:
	The file

 PROCEDURE:

 EXAMPLE:

 MODIFICATION HISTORY:
	01/27/98 Written by E. Deutsch

</PRE><P>
<STRONG>(See tmp1/extcat_ac2000.pro)</STRONG><P>
<HR>
 
<A NAME="EXTRAC">
<H2>EXTRAC</H2></A>
<A HREF="#EXTCAT_AC2000">[Previous Routine]</A>
<A HREF="#FPR">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	EXTRAC

 PURPOSE:
	The EXTRAC function returns as its result any rectangular sub-matrix
	or portion of the parameter array.  When parts of the specified
	subsection lie outside the bounds of the array, zeros are
	entered into these outlying elements.

	EXTRAC was originally a built-in system procedure in the PDP-11
	version of IDL, and was retained in that form in the original VAX/VMS
	IDL for compatibility.  Most applications of the EXTRAC function
	are more concisely written using subscript ranges (e.g., X(10:15)).  In
	the current release of IDL, EXTRAC has been rewritten as a User Library
	function that provides the same interface as the previous versions.

 CATEGORY:
	Array Manipulation.

 CALLING SEQUENCE:
	Result = EXTRAC(Array, C1, C2, ..., Cn, S1, S2, ..., Sn)

 INPUTS:                 
	Array:	The array from which the subarray will be copied.

	Ci:	The starting subscript in Array for the subarray. There
		should be one Ci for each dimension of Array.

	Si:	The size of each dimension.  The result will have dimensions
		of (S1, S2, ..., Sn). There should be one Si for each
		dimension of Array.

 OUTPUTS:
	This function returns a two-dimensional, floating-point,
	interpolated array.

 RESTRICTIONS:
	In order to make the most typical cases run quickly, little error 
	checking is done on the input.  In particular, the Ci and Si arguments
	must all be scalar integers, and the Si must be non-negative.

	If you know that the subarray will never lie beyond the edges of
	the array, it is more efficient to use array subscript ranges
	to extract the data instead of EXTRAC. 

 PROCEDURE:
	If the subarray lies entirely inside the Array argument, the
	standard array subscript-range mechanism is used to do the work.
	Otherwise, a zeroed array of the correct type and size is
	created, and the overlapping subarray is copied into it.

 EXAMPLES:
	EXAMPLE 1:
	Define a 1000 point vector with each element initialized to
	its subscript.  Extract a 300 pt. vector, starting at A(200) and
	going to A(499).  B(0) will be equal to A(200), B(299) will be
	equal to A(499).  Enter:

	    A = FINDGEN(1000)
	    B = EXTRAC(A, 200, 300)

	EXAMPLE 2:
	Here, the first 49 points extracted (B(0) to B(49)) lie outside
	the bounds of the vector and are set to 0.  B(50) is set to A(0),
	B(51) is set to A(1) which is 1, ... Enter:

	    A = FINDGEN(1000)
	    B = EXTRAC(A, -50, 100)

	EXAMPLE 3:
	The following commands illustrate the use of EXTRAC with multi-
	dimensional arrays.  Enter:

	    A = INTARR(64,64)	;Make a 64X64 matrix to play with

	Take out a 32X32 portion starting at A(20,30) by entering:

	    B = EXTRAC(A, 20, 30, 32, 32)

	A better way to perform the same operation as the previous line is:

	    B = A(20:51, 30:61)

	Extract the 20th column and 32nd row of A:

	    B = EXTRAC(A, 19, 0, 1, 64)	; Extract 20th column of A
	    B = EXTRAC(A, 0, 31, 64, 1)	; Extract 32nd row of A

	Take a 32X32 matrix from A starting at A(40,50).

	    B = EXTRAC(A, 40, 50, 32, 32)

	NOTE: Those points beyond the boundaries of A are set to 0.

 REVISION HISTORY:
	July 18, 1989	Written AB, RSI
</PRE><P>
<STRONG>(See tmp1/extrac.pro)</STRONG><P>
<HR>
 
<A NAME="FPR">
<H2>FPR</H2></A>
<A HREF="#EXTRAC">[Previous Routine]</A>
<A HREF="#GAUSS2">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 This procedure processes the frame for display
 in the IMGroam environment.  It is not useful by itself.

</PRE><P>
<STRONG>(See tmp1/fpr.pro)</STRONG><P>
<HR>
 
<A NAME="GAUSS2">
<H2>GAUSS2</H2></A>
<A HREF="#FPR">[Previous Routine]</A>
<A HREF="#GDRFLATEXAM">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
*NAME:  GAUSS2   
*CLASS:
    numerical function
*CATEGORY:

*PURPOSE:  TO CALCULATE A GAUSSIAN FUNCTION
 
*CALLING SEQUENCE: 
    GAUSS,X,X0,DX,YMAX,Y
 
*PARAMETERS:
    X     (REQ) (I) (0 1) (I L F D)
          required scalar or vector containing the independent variable(s)

    X0    (REQ) (I) (0)   (F D)
          required scalar giving the center of the Gaussian function
          This parameter must have the same units as X.

    DX    (REQ) (I) (0)   (F D)
          required scalar giving the one sigma width of the distribution
          This parameter must have the same units as X.

    YMAX  (REQ) (I) (0)   (F D)
          the Gaussian value at the peak of the distribution
 
    Y     (REQ) (O) (0 1) (F D)
          required output scalar or vector giving the calculated value
          of the gaussian from the expression:
          Y = YMAX * EXP (-0.5 * ((X-X0)/DX)^2)
 
*EXAMPLES:
    To calculate a gaussian with center at 1545 A, sigma of 2 A, using the
    wavelength scale derived from an IUE spectrum, with amplitude 1.0,
 
     GAUSS,WAVE,1545.,2.,1.0,Y

*SYSTEM VARIABLES USED:
     None

*INTERACTIVE INPUT:
     None

*SUBROUTINES CALLED:
     PARCHECK

*FILES USED:
     None

*SIDE EFFECTS:
     None

*RESTRICTIONS:
     None

*NOTES:
    Values for which (X-X0)/DX > 9 are set to zero.
    If DX = 0, the delta function is returned.
 
*PROCEDURE: 
    GAUSS is similiar to Bevingtons program PGAUSS (p.45)

*MODIFICATION HISTORY:
    Aug 19 1979  I. Ahmad  initial program
    Jul  7 1984  RWT GSFC  updated documentation
    Sep 25 1984  RWT GSFC  changed limit from 12 sigma to 9 sigma due to
                           problems in WFIT. Also compiles PCHECK.
    Apr 13 1987  RWT GSFC  add PARCHECK
    Aug 19 1987  RWT GSFC  add procedure call listing
    Mar  9 1988  CAG GSFC  add VAX RDAF-style prolog
    Nov 26 1990  JKF ACC   copied to GHRS DAF
</PRE><P>
<STRONG>(See tmp1/gauss2.pro)</STRONG><P>
<HR>
 
<A NAME="GDRFLATEXAM">
<H2>GDRFLATEXAM</H2></A>
<A HREF="#GAUSS2">[Previous Routine]</A>
<A HREF="#GDRMKCALS">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	GDRFLATEXAM

 PURPOSE:
	Examine the files FLAT[1-9].

 CATEGORY:
	APO software

 CALLING SEQUENCE:
	gdrflatexam
	gdrflatexam,[size=]

 INPUTS:
	none

 OPTIONAL INPUT KEYWORDS:
	size:	If the images are not 512x512 (the default 1x1 bin of the
		512^2 chip), then you must specify the size of the image
		with this keyword.

 OUTPUTS:
	None

 COMMON BLOCKS:
	None.

 SIDE EFFECTS:
	None.

 RESTRICTIONS:
	None.

 PROCEDURE:
	

 EXAMPLE:
	gdrmkcals

 MODIFICATION HISTORY:
	12/18/95 Written by E. Deutsch

</PRE><P>
<STRONG>(See tmp1/gdrflatexam.pro)</STRONG><P>
<HR>
 
<A NAME="GDRMKCALS">
<H2>GDRMKCALS</H2></A>
<A HREF="#GDRFLATEXAM">[Previous Routine]</A>
<A HREF="#GETDEFVAL">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	GDRMKCALS

 PURPOSE:
	Generate guider calibration frames Zero and Dark from files
	zero[1-7] and dark[1-7].

 CATEGORY:
	APO software

 CALLING SEQUENCE:
	gdrmkcals
	gdrmkcals,[size=]

 INPUTS:
	none

 OPTIONAL INPUT KEYWORDS:
	size:	If the images are not 512x512 (the default 1x1 bin of the
		512^2 chip), then you must specify the size of the image
		with this keyword.

 OUTPUTS:
	files Zero.hhh & .hhd  and  Dark.hhh & .hhd

 COMMON BLOCKS:
	None.

 SIDE EFFECTS:
	None.

 RESTRICTIONS:
	None.

 PROCEDURE:
	Source images are loaded and combined.

 EXAMPLE:
	gdrmkcals

 MODIFICATION HISTORY:
	09/22/95 Written by E. Deutsch
	11/20/95 Modified for 512x512 camera default by E. Deutsch

</PRE><P>
<STRONG>(See tmp1/gdrmkcals.pro)</STRONG><P>
<HR>
 
<A NAME="GETDEFVAL">
<H2>GETDEFVAL</H2></A>
<A HREF="#GDRMKCALS">[Previous Routine]</A>
<A HREF="#GETFILE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   GETDEFVAL
 PURPOSE:
   This procedure returns the default value for the supplied keyword, first
   checking IDL_PRFDEF and then IDL_SYSDEF.
 CALLING SEQEUNCE:
   GetDefVal,value,keyword
</PRE><P>
<STRONG>(See tmp1/getdefval.pro)</STRONG><P>
<HR>
 
<A NAME="GETFILE">
<H2>GETFILE</H2></A>
<A HREF="#GETDEFVAL">[Previous Routine]</A>
<A HREF="#GETSTRIP">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   GETFILE
 DESCRIPTION:
    This function helps the user retrieve a file in IDL.  Better than
    FileView since you can have several disks in your user defined tree
    under FILETREE.DAT in your home (VMS: SYS$LOGIN) directory.  See notes 
    for a detailed description. Best when used with Xwindows (or other 
    devices that support the MENU function,) but it is functional in text 
    mode.
 CALLING SEQUENCE:
    file = GETFILE(SRCHPATH = srchpath,SRCHSPEC = srchspec, TREE = tree)
 OPTIONAL INPUT:
    SRCHPATH  An optional starting search path.  Often handy to keep this
          around and pass it every time so the user always starts where
          he left off in a program.
    SRCHSPEC  An optional search filter to find certain types of files
          (e.g. '*.*', '*.*;', '*.*;*', '*.hhh', '*.%%h', '*.pro', etc.)
    TREE - string array giving a list of directories to be used instead
          of a FILETREE.DAT file.
    Note: All of these keyword parameters may be passed without prior
          definition.  They will be returned with the last directory
          and specification displayed.
 OUTPUT:
  FILE      The name of the returned file.  Set to '+CANCEL' if the
          user canceled the operation.
 NOTES:
    For maximum flexibility, create a file called FILETREE.DAT in your
  login directory.  In it put a list of directories that you use
  frequently and/or your root directory on each disk.  This allows
  trivial hopping between different disks (better than FileView.)  You
  may also include the names of certain files which you will access a lot
  with this function.
HISTORY:
  14-AUG-90 Version 1 written by E. Deutsch
  11-JAN-91 Changed parameters to keywords, added listing of truncated 
   	     files, removed unnecessary options.     K. Bhagat,    STX
  20-AUG-91 Replaced line which was mysteriously removed in 11-JAN-91
    modification which caused GETFILE not to work with FILETREE.DAT. E.Deutsch
  27-Aug-91 Use GETENV("HOME") instead of SYS$LOGIN     W. Landsman
</PRE><P>
<STRONG>(See tmp1/getfile.pro)</STRONG><P>
<HR>
 
<A NAME="GETSTRIP">
<H2>GETSTRIP</H2></A>
<A HREF="#GETFILE">[Previous Routine]</A>
<A HREF="#GRDREAD">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   GETSTRIP
 PURPOSE:
   This procedure returns a profile through an image at any angle or position.
   First the theoretical line is calculated given the center, angle and length
   in pixels.  Then pixel in the profile is bilinearly interpolated from the
   pixels in the image.
 CALLING SEQEUNCE:
   result = GetStrip(img,xcent,ycent,angle,length,xvect,yvect)
 INPUT:
   IMG       This is the 2D image array from which the profile is to be taken.
   XCENT     This is the X coordinate of the center of the profile.  It does
               not need to be an exact integer.  nn.0 references the exact
               X center of a pixel.
   YCENT     This is the Y coordinate of the center of the profile.  It does
               not need to be an exact integer.  nn.0 references the exact
               Y center of a pixel.
   ANGLE     This is the angle of the profile in degrees counterclockwise
               from the positive X axis.
   LENGTH    This is the length in elements (and pixels) of the returned
               profile.  Therefore no matter what the angle is, the returned
               vector will have LENGTH elements and is a profile with a
               physical length of LENGTH image pixels.
 OUTPUT:
   result       The returned profile array.
 OPTIONAL OUTPUT:
   XVECT     This variable returns the array of positions of each profile
               pixel.  These returned values are floating.  This returned
               vector is especially useful for averaging along wide strips.
   YVECT     This variable returns the array of positions of each profile
               pixel.  These returned values are floating.
 EXAMPLE:    In a North Up and East Left image of size 512x512 and pixelsize
               of 1.5", the following call:
                 IDL> TMP=GetStrip(img,256,256,45,51)
               returns a 51 element vector where tmp(25)=img(256,256) and
               elements less than 25 are to the Southeast and elements greater
               than 25 increase toward the Northwest.  The pixel size of the
               strip TMP is 1.5" also.
                 IDL> tmp=GetStrip(img,256,256,0,51)
               is equivalent to...
                 IDL> tmp=img(256-25:256+25,256)
 HISTORY:
   27-JUL-92 Added header and spiffed up this procedure.   (E. Deutsch)
   12-NOV-92 Removed extra +.5's inside the interpolate().  (E. Deutsch)
</PRE><P>
<STRONG>(See tmp1/getstrip.pro)</STRONG><P>
<HR>
 
<A NAME="GRDREAD">
<H2>GRDREAD</H2></A>
<A HREF="#GETSTRIP">[Previous Routine]</A>
<A HREF="#GRIMAPER">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	GRDREAD

 PURPOSE:
	Read an image from the APO Guider instrument into IDL variables.
	By default, 512x512 images are expected (1x1 binning on the 512^2
	camera, but this can be changed with the size= keyword.

 CATEGORY:
	APO software

 CALLING SEQUENCE:
	gdrread,image,header,filename
	gdrread,image,header,filename [,/fixpix,bias=,dark=,flat=,/orien,
		/disp,/macfix,size=]

 INPUTS:
	filename: A string containing the name of the image to be read. 
		The image must be in the guider software native format
		(which is just a binary dump).

 OPTIONAL INPUT KEYWORDS:
	fixpix:	If set, bad columns on the old SS 1024^2 chip are fixed.

	bias:	If set, an archival bias frame is subtracted.

	dark:	If set, an archival dark frame is subtracted.

	flat:	If set, an archival flat field is applied.

	disrot:	If set, the field is flipped and rotated so that North is
		up and East is left when the instang=0 if DIS is main inst.

	dscrot:	If set, the field is flipped and rotated so that North is
		up and East is left when the instang=0 if DSC is main inst.

	disp:	If set, the image is displayed after it is read.

	macfix: If set, the Macintosh binary header is stripped from the
		file (this is useful if the file was transferred in
		"MacBinary" mode, although this should be avoided).

	size:	If the image is not 512x512 (the default 1x1 bin of the
		512^2 chip), then you must specify the size of the image
		with this keyword.

 OUTPUTS:
	image:	variable into which 2D Guider image array will be stored.

	header:	variable into which Guider image header will be stored.

 COMMON BLOCKS:
	None.

 SIDE EFFECTS:
	None.

 RESTRICTIONS:
	None.

 PROCEDURE:
	Guider image is read into memory, and then any appropriate steps
	specified by the keywords are performed.

 EXAMPLE:
	window,colors=50
	whitesky,res='RED'
	gdrread,img,h,'ewd01',size=512,/disp
	imgroam,img,h

 MODIFICATION HISTORY:
	05/14/95 Written by Eric W. Deutsch
	12/18/95 Updated to have 512^2 camera as default adn tidied a bit. EWD

</PRE><P>
<STRONG>(See tmp1/gdrread.pro)</STRONG><P>
<HR>
 
<A NAME="GRIMAPER">
<H2>GRIMAPER</H2></A>
<A HREF="#GRDREAD">[Previous Routine]</A>
<A HREF="#GRIMBADPIXMAP">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	GRIMAPER

 PURPOSE:
	Quick aperture photometry wrapper for an image from the APO GRIM II.

 CATEGORY:
	APO software

 CALLING SEQUENCE:
	grimaper,image,header,xcenter,ycenter,radii

 INPUTS:
	image:	2D GRIM image array, usually read with GRIMREAD.

	header:	Header array, usually read with GRIMREAD.

	xcenter: X position of the center of the aperture.

	ycenter: Y position of the center of the aperture.

	radii:	array of aperture radii.

 OPTIONAL INPUT KEYWORDS:
	None.

 OUTPUTS:
	Printed aperture information.

 COMMON BLOCKS:
	None.

 SIDE EFFECTS:
	None.

 RESTRICTIONS:
	AStronomy library routine APER required.

 PROCEDURE:
	Astronomy User's Library APER routine is called with appropriate
	parameters.

 EXAMPLE:
	grimread,img,h,'/host/dione/u3/deutsch/grim/sample/n1.0004',/flagdef
	grimaper,img,h,125,92,[5,7,9]

 MODIFICATION HISTORY:
	1995 Written by E. Deutsch

</PRE><P>
<STRONG>(See tmp1/grimaper.pro)</STRONG><P>
<HR>
 
<A NAME="GRIMBADPIXMAP">
<H2>GRIMBADPIXMAP</H2></A>
<A HREF="#GRIMAPER">[Previous Routine]</A>
<A HREF="#GRIMCOMBINE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	GRIMBADPIXMAP

 PURPOSE:
	Combine a set of dark frames.

 CATEGORY:
	APO software

 CALLING SEQUENCE:
	grimbadpixmap,searchspec
	grimbadpixmap,searchspec,[outputfilename]

 INPUTS:
	searchspec: A string containing the search specification for the
		images to be used.  This is typically '*.hhh'

 OPTIONAL INPUTS:
	outputfilename: A string containing the name of an output file
		which will contain the bad pixel map.  If this
		paramenter is not supplied, the name will be 'badpix'

 OPTIONAL INPUT KEYWORDS:
	None.

 OUTPUTS:
	None.

 COMMON BLOCKS:
	None.

 SIDE EFFECTS:
	None.

 RESTRICTIONS:
	None.

 PROCEDURE:
	A list of images is assembled, and then the images are average combined.

 EXAMPLE:
	grimbadpixmap,'dome/*.hhh'

 MODIFICATION HISTORY:
	1995 Written by E. Deutsch

</PRE><P>
<STRONG>(See tmp1/grimbadpixmap.pro)</STRONG><P>
<HR>
 
<A NAME="GRIMCOMBINE">
<H2>GRIMCOMBINE</H2></A>
<A HREF="#GRIMBADPIXMAP">[Previous Routine]</A>
<A HREF="#GRIMDARKCOMBINE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>

 this is a quick hack main program to shift and combine a set of GRIM
 images using a bad pixel map.  This works really well, but the program
 needs a lot of work.  I don't have any GRIM data exciting enough to
 put time into this at the moment.

 "needs work"

 good idea:
 1) run it through this program once
 2) create a star mask from the final image.
 3) Then, run it through again masking not just bad pixels, but also the
    stars to generate a better flat field.
 4) Then run it through one final time with the better flat field.
  someday I'll write a program which will do all this... sigh.
</PRE><P>
<STRONG>(See tmp1/grimcombine.pro)</STRONG><P>
<HR>
 
<A NAME="GRIMDARKCOMBINE">
<H2>GRIMDARKCOMBINE</H2></A>
<A HREF="#GRIMCOMBINE">[Previous Routine]</A>
<A HREF="#GRIMFLATCOMBINE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	GRIMDARKCOMBINE

 PURPOSE:
	Combine a set of dark frames.

 CATEGORY:
	APO software

 CALLING SEQUENCE:
	grimdarkcombine,searchspec
	grimlist,searchspec [,outputfilename]

 INPUTS:
	searchspec: A string containing the search specification for the
		images to be combined.  This is typically '*.hhh'

 OPTIONAL INPUTS:
	outputfilename: A string containing the name of an output file
		which will contain the final dark.  If this
		paramenter is not supplied, the name will be 'Dark'

 OPTIONAL INPUT KEYWORDS:
	None.

 OUTPUTS:
	None.

 COMMON BLOCKS:
	None.

 SIDE EFFECTS:
	None.

 RESTRICTIONS:
	None.

 PROCEDURE:
	A list of images is assembled, and then the images are average combined.

 EXAMPLE:
	grimdarkcombine,'darks/*.hhh'

 MODIFICATION HISTORY:
	1995 Written by E. Deutsch

</PRE><P>
<STRONG>(See tmp1/grimdarkcombine.pro)</STRONG><P>
<HR>
 
<A NAME="GRIMFLATCOMBINE">
<H2>GRIMFLATCOMBINE</H2></A>
<A HREF="#GRIMDARKCOMBINE">[Previous Routine]</A>
<A HREF="#GRIMLIST">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	GRIMFLATCOMBINE

 PURPOSE:
	Combine a set of image frames to make a flat.

 CATEGORY:
	APO software

 CALLING SEQUENCE:
	grimflatcombine,searchspec
	grimlist,searchspec [,outputfilename]

 INPUTS:
	searchspec: A string containing the search specification for the
		images to be combined.  This is typically '*.hhh'

 OPTIONAL INPUTS:
	outputfilename: A string containing the name of an output file
		which will contain the final flat.  If this
		paramenter is not supplied, the name will be 'Flat'

 OPTIONAL INPUT KEYWORDS:
	None.

 OUTPUTS:
	None.

 COMMON BLOCKS:
	None.

 SIDE EFFECTS:
	None.

 RESTRICTIONS:
	None.

 PROCEDURE:
	A list of images is assembled, and then the images are median combined.

 EXAMPLE:
	grimflatcombine,'flat10/*.hhh'

 MODIFICATION HISTORY:
	1998 Written by E. Deutsch

</PRE><P>
<STRONG>(See tmp1/grimflatcombine.pro)</STRONG><P>
<HR>
 
<A NAME="GRIMLIST">
<H2>GRIMLIST</H2></A>
<A HREF="#GRIMFLATCOMBINE">[Previous Routine]</A>
<A HREF="#GRIMPROC">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	GRIMLIST

 PURPOSE:
	Generate a listing of GRIM images with interesting information in
	various columns.

 CATEGORY:
	APO software

 CALLING SEQUENCE:
	grimlist,searchspec
	grimlist,searchspec [,outputfilename]

 INPUTS:
	searchspec: A string containing the search specification for the
		images to be listed.  This is typically '*.hhh'

 OPTIONAL INPUTS:
	outputfilename: A string containing the name of an output file
		which will contain the listing of images.  If this
		paramenter is not supplied, the name will be 'listhdrs.out'

 OPTIONAL INPUT KEYWORDS:
	None.

 OUTPUTS:
	None.

 COMMON BLOCKS:
	None.

 SIDE EFFECTS:
	None.

 RESTRICTIONS:
	None.

 PROCEDURE:
	A list of images is assembled, and then each header is read and a
	list of interesting information about each image is written to a list.

 EXAMPLE:
	grimlist,'*.hhh'

 MODIFICATION HISTORY:
	1995 Written by E. Deutsch

</PRE><P>
<STRONG>(See tmp1/grimlist.pro)</STRONG><P>
<HR>
 
<A NAME="GRIMPROC">
<H2>GRIMPROC</H2></A>
<A HREF="#GRIMLIST">[Previous Routine]</A>
<A HREF="#GRIMREAD">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>

 this is a quick hack main program to dark-sub and flat and set up a shifts
 file to run grimcombine.pro.

 "needs work"
</PRE><P>
<STRONG>(See tmp1/grimproc.pro)</STRONG><P>
<HR>
 
<A NAME="GRIMREAD">
<H2>GRIMREAD</H2></A>
<A HREF="#GRIMPROC">[Previous Routine]</A>
<A HREF="#GRIMSUMMARY">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	GRIMREAD

 PURPOSE:
	Read an image from the APO GRIM II instrument into IDL variables.
	By default, the image is dark-subtracted, flat-fielded, and flipped
	and rotated so that North is up and East is left when the instrument
	angle is 0.

 CATEGORY:
	APO software

 CALLING SEQUENCE:
	grimread,image,header,filename
	grimread,image,header,filename [,/noproc,/noflat,/levfit,/flagdefects,
		darkfile=,flatfile=,/disp,/norot]

 INPUTS:
	filename: A string containing the name of the image to be read. 
		The image may be a GEIS file (.hhh & .hhd), an OIF file
		(.imh & .pix) or a FITS file (.fit or .fits).  If no
		no file extention is specified, .hhh is assumed.

 OPTIONAL INPUT KEYWORDS:
	noproc:	If set, no processing or rotating is done to the image.

	noproc:	If set, a flat-field is not applied to the image.

	levfit:	There are often differences in bias levels (and even a
		curved level) between the four quadrants.  Set this
		keyword to attempt to fit and remove this level differences.

	flatdefects: Flag the bad pixels as determined by a bad pixel file.
		All bad pixels are given the value 65535.0

	darkfile: A string containing the filename of a dark file to be
		subtracted from the image instead of the default dark.

	flatfile: A string containing the filename of a flat-field file to be
		divided into the image instead of the default flat.

	disp: If set, the image is also displayed.

	norot: If set, the image is is NOT rotated 180 degrees.

 OUTPUTS:
	image:	variable into which 2D GRIM image array will be stored.

	header:	variable into which GRIM image header will be stored.

 COMMON BLOCKS:
	None.

 SIDE EFFECTS:
	Approximate image stretching parameters are stored in the header.

 RESTRICTIONS:
	None.

 PROCEDURE:
	GEIS image is read into memory, and then a dark is subtracted, the
	image is flat-fielded with archival calibration images.  If desired,
	bias levels are fit and corrected, and bad pixels are flagged to
	65535.0.  Finally the image is flipped and rotated, and approximate
	stretching parameters are stored in the header.

 EXAMPLE:
	window,colors=50
	whitesky,res='RED'
	grimread,img,h,'/host/dione/u3/deutsch/grim/sample/n1.0004',/flagdef
	imgroam,img,h

 MODIFICATION HISTORY:
	1995 Written by E. Deutsch

</PRE><P>
<STRONG>(See tmp1/grimread.pro)</STRONG><P>
<HR>
 
<A NAME="GRIMSUMMARY">
<H2>GRIMSUMMARY</H2></A>
<A HREF="#GRIMREAD">[Previous Routine]</A>
<A HREF="#GSCA10COMP">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	GRIMSUMMARY

 PURPOSE:
	Generate a summary of GRIM images with interesting information in
	various columns.

 CATEGORY:
	APO software

 CALLING SEQUENCE:
	grimsummary,searchspec
	grimsummary,searchspec [,outputfilename]

 INPUTS:
	searchspec: A string containing the search specification for the
		images to be listed.  This is typically '*.hhh'

 OPTIONAL INPUTS:
	outputfilename: A string containing the name of an output file
		which will contain the listing of images.  If this
		paramenter is not supplied, the name will be 'listhdrs.out'

 OPTIONAL INPUT KEYWORDS:
	None.

 OUTPUTS:
	None.

 COMMON BLOCKS:
	None.

 SIDE EFFECTS:
	None.

 RESTRICTIONS:
	None.

 PROCEDURE:
	A list of images is assembled, and then each header is read and a
	list of interesting information about each image is written to a list.

 EXAMPLE:
	grimsummary,'*.hhh'

 MODIFICATION HISTORY:
	1997-MAR-19  Written by E. Deutsch

</PRE><P>
<STRONG>(See tmp1/grimsummary.pro)</STRONG><P>
<HR>
 
<A NAME="GSCA10COMP">
<H2>GSCA10COMP</H2></A>
<A HREF="#GRIMSUMMARY">[Previous Routine]</A>
<A HREF="#GSCTAB2LST">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	GSCA10COMP

 PURPOSE:
	Compare coordinates of stars in a GSC (gsclist) file and a USNO-A1.0
	(a10list) file.

 CATEGORY:
	APO software

 CALLING SEQUENCE:
	gsca10comp,gscfile,a10file,[/plot]

 INPUTS:
	gscfile: The filename of an HST Guide Star Catalog (GSC) extraction
		which contains the target field and the surrounding region.

	a10file: The filename of an USNO-A1.0 extraction
		which contains the target field and the surrounding region.

 OUTPUTS:
	Screen image or postscript file.

 PROCEDURE:

 EXAMPLE:

 MODIFICATION HISTORY:
	01/01/97 Written by E. Deutsch

</PRE><P>
<STRONG>(See tmp1/gsca10comp.pro)</STRONG><P>
<HR>
 
<A NAME="GSCTAB2LST">
<H2>GSCTAB2LST</H2></A>
<A HREF="#GSCA10COMP">[Previous Routine]</A>
<A HREF="#GSC_READ">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 convert a FITS table from IRAF 'regions' task into the ascii list like
 that outputted by the VAXes.  -Deutsch 4/3/94

 Call> gsctab2lst,inputtab,outlst
 e.g.> gsctab2lst,'47tuc.tab','47tuc.gsclst'

</PRE><P>
<STRONG>(See tmp1/gsctab2lst.pro)</STRONG><P>
<HR>
 
<A NAME="GSC_READ">
<H2>GSC_READ</H2></A>
<A HREF="#GSCTAB2LST">[Previous Routine]</A>
<A HREF="#GS_DISP">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   GSC_READ
 DESCRIPTION:
   This procedure reads a ST Guide Star format file and returns the stars in
   an array of structures with fields ID,StrID,RA,DEC,MAG.
 CALLING SEQUENCE:
   GSC_Read,FILE,LS,[Trgt_Coord],[/silent,/Duplicates,/Verbose,MaxStars=]
 INPUT:
   FILE      The Name of the File to Load
 OUTPUT:
   LS        The array of Stuctures containing the star information.  The
               fields are given above.  Address the String ID of the sixth
               star with ls(5).StrID
             Note that ls(0).ID will equal -1 if the file could not be loaded.
 OPTIONAL OUTPUT:
   TRGT_COORD  The [RA,DEC] of the Target as listed at the top of the GSC file.
 OPTIONAL FLAGS/PARAMETERS:
   SILENT     If set, all messages including error messages are inhibited.
                This keyword overrides the VERBOSE keyword.
   DUPLICATES If set, duplicate stars will be KEPT.  The default is to keep
                only the first of duplicate stars, which appear frequently
                in the STGSC (when a star appears on more than one plate.)
   VERBOSE    If set, informational messages (Targets Coords, Equinox, Stars
                read, duplicates skipped) WILL be printed.
   MAXSTARS   The stars information is initally loaded into a huge array and
                then chopped down to the appropriate size when all stars are
                loaded.  The default value is 2000.  Increase for huge files.
   RArange    Allows the selection of Stars within this VECTOR [MIN,MAX] RA.
   DECrange   Allows the selection of Stars within this VECTOR [MIN,MAX] DEC.
 HISTORY:
   24-AUG-91 Updated, fixed, and made more user-friendly procedure STGSFREAD
             (EWD) and renamed to GSC_Read   (Eric W. Deutsch)
   29-JAN-92 Changed trgt_RA,trgt_DEC to one parameter Trgt_Coord    (EWD)
   29-JAN-92 Added RArange and DECrange keywords and selection code  (EWD)
</PRE><P>
<STRONG>(See tmp1/gsc_read.pro)</STRONG><P>
<HR>
 
<A NAME="GS_DISP">
<H2>GS_DISP</H2></A>
<A HREF="#GSC_READ">[Previous Routine]</A>
<A HREF="#GS_FOVPLOT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 This procedure displays information in the astrometry package
 in the IMGroam environment.  It is not useful by itself.

</PRE><P>
<STRONG>(See tmp1/gs_disp.pro)</STRONG><P>
<HR>
 
<A NAME="GS_FOVPLOT">
<H2>GS_FOVPLOT</H2></A>
<A HREF="#GS_DISP">[Previous Routine]</A>
<A HREF="#GS_MAIN">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 This procedure displays a loaded HST Guide star catalog
 in the IMGroam environment.  It is not useful by itself.

</PRE><P>
<STRONG>(See tmp1/gs_fovplot.pro)</STRONG><P>
<HR>
 
<A NAME="GS_MAIN">
<H2>GS_MAIN</H2></A>
<A HREF="#GS_FOVPLOT">[Previous Routine]</A>
<A HREF="#GS_ROAM">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 This procedure handles all the functions of the astrometry package
 in the IMGroam environment.  It is not useful by itself.


</PRE><P>
<STRONG>(See tmp1/gs_main.pro)</STRONG><P>
<HR>
 
<A NAME="GS_ROAM">
<H2>GS_ROAM</H2></A>
<A HREF="#GS_MAIN">[Previous Routine]</A>
<A HREF="#HDRLOG">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 This procedure is the analog of IR_Roam in the Astrometry package
 in the IMGroam environment.  It is not useful by itself.

</PRE><P>
<STRONG>(See tmp1/gs_roam.pro)</STRONG><P>
<HR>
 
<A NAME="HDRLOG">
<H2>HDRLOG</H2></A>
<A HREF="#GS_ROAM">[Previous Routine]</A>
<A HREF="#HLINES">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 *****************************************************************************
 ******* PROCEDURE: HDRLOG
 *****************************************************************************
 *** DESCRIPTION:
 ***	  This procedure takes a group of files in the SDAS format and creates
 ***	a .LOG file of concatenated headers in the exact same format as the
 ***	FITSLOG program does with FITS tapes.
 *** INPUT:
 ***	SRCHPATH  The path specification and filter where to search for the
 ***		header files.  MUST include the .xxH extender!
 ***	LOGfile	  The output filename where the concatenated headers are put.
 *** OUTPUT:
 ***	A file of concatenated headers name LOGfile
 ***	All passed variables remain unchanged
 *** COMMON blocks:
 ***   None
 *** Other Procedures/Functions Called:
 ***   None
 *** NOTES:
 ***	None
 *** HISTORY:
 ***	08-AUG-90 Version 1 adapted from olde IDL version
 *********** IDL 2.0 ************ Eric W. Deutsch ********* 08-AUG-90 ********
</PRE><P>
<STRONG>(See tmp1/hdrlog.pro)</STRONG><P>
<HR>
 
<A NAME="HLINES">
<H2>HLINES</H2></A>
<A HREF="#HDRLOG">[Previous Routine]</A>
<A HREF="#IMCOMBINE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   HLINES
 PURPOSE:
   Print out some optical Hydrogren lines.
 CALLING SEQEUNCE:
   hlines,[nlines]
 INPUT:
   NLINES  Number of lines desired in each series
</PRE><P>
<STRONG>(See tmp1/hlines.pro)</STRONG><P>
<HR>
 
<A NAME="IMCOMBINE">
<H2>IMCOMBINE</H2></A>
<A HREF="#HLINES">[Previous Routine]</A>
<A HREF="#IMGBORD">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
  result=call_external(CLIB,'imcombine',imgcube,fimg,sz,1L)
</PRE><P>
<STRONG>(See tmp1/imcombine.pro)</STRONG><P>
<HR>
 
<A NAME="IMGBORD">
<H2>IMGBORD</H2></A>
<A HREF="#IMCOMBINE">[Previous Routine]</A>
<A HREF="#IMGCLEAN[1]">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   IMGBORD
 DESCRIPTION:
     This procedure puts a border of the specified color and thickness
   around an image of the specified size and offset WITHOUT writing over
   the image.  Therefore, an image with an offset of 0,0 cannot have a
   border.  Move the image over.
 INPUT:
   COLOR     the color for the border.  depends on the color table.  def=255
   THICK     the thickness of the border lines (in pixels)  def=1
   XSIZE     the Xsize of the image to be framed
   YSIZE     the Ysize of the image to be framed
   XOFF      the Xoffset of the image to be framed
   YOFF      the Yoffset of the image to be framed
 OUTPUT:
   The border itself
   all passed variables remain unchanged
 HISTORY:
   30-MAY-90 Version 1 written  Eric W. Deutsch
</PRE><P>
<STRONG>(See tmp1/imgbord.pro)</STRONG><P>
<HR>
 
<A NAME="IMGCLEAN[1]">
<H2>IMGCLEAN[1]</H2></A>
<A HREF="#IMGBORD">[Previous Routine]</A>
<A HREF="#IMGCLEAN[2]">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   IMGclean
 PURPOSE:
     This procedure is designed to remove cosmic ray hits (CRs) from an image,
   especially WFPC images.  The procedure's effectiveness varies from image
   to image.  Often, it does an excellent job, but sometimes
   the operational parameters must be modified (via keywords) to tweak
   the performance of the software.
     It should not be assumed that this procedure will automatically do a good
   job!  Keep a close eye on before and after images.  Occaisionally, a faint
   star gets obliterated, especially if there is a cosmic ray around 3 pixels
   from it.  Naturally, this procedure is only recommended when a CR split is
   not possible, as that will often yield better results.
     Run IMGclean twice on the same image to acheive best cleaning results
   especially on images with very dense CR's.
     Still in a somewhat primitive state, this procedure still need some
   improvement to the algorithm.  Suggestions welcome to deutsch@stsci.edu.
     Use the CLEANEXAMINE main program to examine the results of the IMGclean
   run.
     Cuyrrently, IMGclean is tweaked for PC images.  I haven't worked with
   WF images in a while, so you may to diddle with the parameters for best
   effect.
 CALLING SEQEUNCE:
   IMGclean,IMAGE,HEADER,[CR_ARRAY],[optional keywords]'
   IMGclean,/help
 INPUT/OUTPUT PARAMETERS:
   IMAGE     This parameter supplies the image in which the CRs are to be
               removed.  This image is MODIFIED!  The output cleaned image
               is returned via this variable.
   HEADER    This parameter is the FITS header.  The header will be modified
               with added HISTORY notes and keywords detailing the settings
               used on the last IMGclean run.
 OPTIONAL OUTPUT:
   CR_ARRAY  This array is a BYTE array of the same size as the input image
               containing some information of which pixels the software
               considered, and what descisions it made as far as CR or STAR.
                   DN    Meaning
                   70    Low scan pixel not removed
                  120    Hi scan pixel not removed (i.e. suspected star)
                  255    Hi scan pixel removed (i.e. cosmic ray)
                  200    Neighboring Low scan pixel removed
 OPTIONAL INPUT:
   HELP             Displays quick keyword defaults values
   TESTRUN          If set, dumps a file with stats on each object considered
   STAR_PSF_SENS    Sensitivity of the STAR checking.
                     The higher the value, the more CRs will be left in the
                     image because they are suspected as being stars.  The
                     lower the value, the more faint stars will be removed.
                     Default=.35  Typical=.35, .25, .30, .40.
                      -Value: .35 is probably the optimum value for doing a
                       good job with CR's but leaving virtually faint
                       scrungy stars for PC frames.
                      -Value: .25 is probably the optimum value for doing
                       the best possible job of cleaning CR's at the
                       expense of removing a few more faint scrungy stars
                       than is proper.  If faint, scrungy stars are not
                       important, this may be the best setting (again, PC).
   SKY_VAL_SAMP_SZ  Size of the boxes used when calculating the local
                     background.  The X,Y image size must be a multiple of the
                     box size.  Use smaller boxes for steeper images.
                     Default values are 10 or 16.
   HI_SCAN_HEIGHT   Pixel value above the sky value in sky RMS units that is
                     flagged as a suspected CR.  Default=6.  Typical=5,6,7
   LO_SCAN_HEIGHT   Pixel value above the sky value in sky RMS units that is
                     removed if it is adjacent to a positively identified CR,
                     provided FINE_CLEAN=1.  Default=1.5.  Typical=2,2.5,3
   FINE_CLEAN       Set (=1) this keyword (Flag) if pixels above LO_SCAN_HEIGHT
                     neighboring pixels identified as CRs are to be removed.
   PHASE1_ITER      Number of iterations for Phase 1.  Should always be 2
                     because 1 iteration tends to leave more CRs behind.
   QPHOT            If set, quick photometry is run on stars using qphot.pro
   NOCLEAN          If set, all objects are assumed to be stars and nothing
                     is checked or removed.  Used in conjunction with QPHOT
                     on an already cleaned image.
 HISTORY:
   02-SEP-90 Version 1.0 written by Eric W. Deutsch (EWD)
   27-JUN-91 Version 1.1 released with several minor modifications including
               changing the operational parameters to keywords. (EWD)
   27-JAN-92 Version 1.2 released with the additions of changing the
               operational parameters to keywords and adding better on-line
               help. (EWD)
   07-MAY-92 Version 1.21 released: proper header added and /HELP keyword
               added.  EWD.
   10-MAY-92 Version 1.22: Fixed "Donutting" problem and changed default
               STAR_PSF_SENS value to .50 instead of .66 since it was removing
               too many actual stars.  EWD.
   24-JUL-92 Version 1.3: Better Star/CR determination algorithm added.
               This algorithm is less Kludgy, but sometimes gives poorer
               results than the v1.22 release.  Needs Work!  EWD.
   08-DEC-92 Version 1.31: Tidied things up a bit, but nothing major.  EWD.
   09-DEC-92 Version 1.32: Fixed a rather major bug in the focus pixel
               identifier and fixed the logic for negative ratios.  This
               now shows a major improvement!  The major task now is to add
               a special identifier for streak CR hits.  EWD
   04-JAN-93 Version 1.40: Changed the default sensitivity to 0.35 which
               make IMGclean more lenient as far as stars go, but added
               another simple-minded neighboring pixels check which catches
               A LOT of CR's.  Basically, I say that if more than 2 of the
               8 neighboring pixels aren't above the low scan hight, then
               it MUST be a cosmic ray.  This now shows another big im-
               provement in number of CR's removed as well as star removed.
               This also does a better job at removing long streaks, but
               an algorithm specifically for longs streaks is needful and
               will be implemented soon.  Header updated.  Eric W. Deutsch
   05-JAN-93 Version 1.41: Little Faster.  Fixed FITS header updating.  EWD
   06-JAN-93   Added a few more comments and text to program header.  EWD
   28-FEB-93 Version 1.42: Added /QPHOT and /NOCLEAN options and code so that
               IMGclean can do some rudimentary quick aperture photometry. EWD
</PRE><P>
<STRONG>(See tmp1/imgclean.pro)</STRONG><P>
<HR>
 
<A NAME="IMGCLEAN[2]">
<H2>IMGCLEAN[2]</H2></A>
<A HREF="#IMGCLEAN[1]">[Previous Routine]</A>
<A HREF="#IMGMRG">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   IMGclean
 PURPOSE:
     This procedure is designed to remove cosmic ray hits (CRs) from a image,
   specifically WFPC images.  The procedure was originally written with one
   image in mind and was made to work well with that image.  Its effectiveness
   for other images varies.  Often, it does an excellent job, but sometimes
   the operational parameters must be modified (via IDL2 kerwords) to tweak
   the performance of the software.
     Still in a somewhat primitive state, this procedure will be improved
   beginning June 1992.  Suggestions welcome to SCIVAX::DEUTSCH.
 CALLING SEQEUNCE:
   IMGclean,IMAGE,HEADER,[CR_ARRAY],[optional keywords]'
   IMGclean,/help
 INPUT/OUTPUT PARAMETERS:
   IMAGE     This parameter supplies the image in which the CRs are to be
               removed.  This image is MODIFIED!  The output cleaned image
               is returned via this variable.
   HEADER    This parameter is the FITS header.  The header will be modified
               with added HISTORY detailing the procedure.
 OPTIONAL OUTPUT:
   CR_ARRAY  This array is a BYTE array of the same size as the input image
               containing some information of which pixels the software
               considered, and what descisions it made as far as CR or STAR.
 OPTIONAL INPUT:
   keywords  The purpose of these ketwords is described by typing
               IMGclean,/help
 HISTORY:
   02-SEP-90 Version 1.0 written by Eric W. Deutsch (EWD)
   27-JUN-91 Version 1.1 released with several minor modifications including
               changing the operational parameters to keywords. (EWD)
   27-JAN-92 Version 1.2 released with the additions of changing the
               operational parameters to keywords and adding better on-line
               help. (EWD)
   07-MAY-92 Version 1.21 released: proper header added and /HELP keyword
               added.  Added MOUSSE check.
   10-MAY-92 Version 1.22: Fixed "Donutting" problem and changed default
               STAR_PSF_SENS value to .50 instead of .66 since it was removing
               too many actual stars.
</PRE><P>
<STRONG>(See tmp1/imgclean122.pro)</STRONG><P>
<HR>
 
<A NAME="IMGMRG">
<H2>IMGMRG</H2></A>
<A HREF="#IMGCLEAN[2]">[Previous Routine]</A>
<A HREF="#IMGMRG_CALL">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 *****************************************************************************
 ******* PROCEDURE: IMGMRG
 *****************************************************************************
 *** DESCRIPTION:
 ***     This procedure will combine two images (mainly designed for GSSS use)
 ***       that individually do not produce a nice centered image.  In other
 ***       words, if as object is near a plate edge, the other plate where the
 ***       object is near the plate edge can also be extracted and the two can
 ***       be combined so that the object will appear in the center if the
 ***       new image and the edge defects can be eliminated.
 *** INPUT:
 ***    Lfile	  The file name (with Header extender) in which the center of
 ***               the object is less than 1024 (Low.) (from ODlist)
 ***    Hfile    The file name (with Header extender) in which the center of
 ***               the object is greater that 12975 (High.) (from ODlist)
 ***    OUTfile  The file name (with Header extender) to which the combined
 ***               image should be written
 ***    LoCen    The height of the Center line of the object (from ODlist) in
 ***               the Lfile.
 ***    HiCen    The height of the Center (corresponding) line of the object
 ***               in the Hfile. [2048-(14000-ODlist#)]
 ***    LoBkg    Background to be subtracted from the Lfile image.
 ***    HiBkg    Background to be subtracted from the Hfile image.
 *** OUTPUT:
 ***    The output file (both .HHD and .HHH)
 ***    all passed variables remain unchanged
 *** NOTES:
 ***    LoCen and HiCen must correspond to the same line in each image for
 ***      the two images to fit properly.  They can be found as calculated
 ***      above from the ODlist, or just picked arbitrarily by examining both
 ***      images and choosing a line.
 ***    The two backround variables are mainly intended to make the two
 ***      backgrounds roughly similar.  These variables were not intended to
 ***      completely subtract out the backgrounds.
 *** HISTORY:
 ***    19-JUN-90 Version 1 written
 *********** IDL 2.0 ************ Eric W. Deutsch ********* 19-JUN-90 ********

pro imgmrg,Lfile,Hfile,OUTfile,LoCen,HiCen,CUT,LoBkg,HiBkg

</PRE><P>
<STRONG>(See tmp1/imgmrg.pro)</STRONG><P>
<HR>
 
<A NAME="IMGMRG_CALL">
<H2>IMGMRG_CALL</H2></A>
<A HREF="#IMGMRG">[Previous Routine]</A>
<A HREF="#IMGPASTE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 ***************************************************************************
 ***   This procedure is designed to allow you to edit the variable inputs of
 *** the IMGMRG procedure more easily.  The the IMGMRG program itself for a
 *** more detailed description of the variables.
 ***************************************************************************

pro combine,dummy

</PRE><P>
<STRONG>(See tmp1/imgmrg_call.pro)</STRONG><P>
<HR>
 
<A NAME="IMGPASTE">
<H2>IMGPASTE</H2></A>
<A HREF="#IMGMRG_CALL">[Previous Routine]</A>
<A HREF="#IMGPUT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
 IMGpaste
 PURPOSE:
  This procedure takes a portion from SRCIMG and pastes it into DSTIMG.
  This is originally intended for replacing a star or other goof that
  IMGclean has made.  DIAM should usually be odd for a symmetrical
  replacement.  If DIAM is even, the extra pixels will spill over to the
  lower x,y pixels.
 CALLING SEQEUNCE:
  IMGpaste,srcimg,dstimg,xcen,ycen,diam
 HISTORY:
  07-JAN-93  Written by Eric W. Deutsch
  11-FEB-93  Bug fix in DIAM determination by Eric W. Deutsch
</PRE><P>
<STRONG>(See tmp1/imgpaste.pro)</STRONG><P>
<HR>
 
<A NAME="IMGPUT">
<H2>IMGPUT</H2></A>
<A HREF="#IMGPASTE">[Previous Routine]</A>
<A HREF="#IMGREAD">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 IMGPUT

 PURPOSE
    Paste a small image into a larger one with edge-clipping handling

 imgput,destimg,srcimg,xll,yll

</PRE><P>
<STRONG>(See tmp1/imgput.pro)</STRONG><P>
<HR>
 
<A NAME="IMGREAD">
<H2>IMGREAD</H2></A>
<A HREF="#IMGPUT">[Previous Routine]</A>
<A HREF="#IMGROAM">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	IMGREAD
 PURPOSE:
	Open an SDAS/GEIS file and read the image into a data array of 
	appropriate type and read the header into a string array.  This 
	procedure was designed to be more versatile than the STRD procedure 
	and to be specifically useful to WF/PC and FOC data, as well as all 
	other GEIS images.  IMGread supports multiple GROUPS (i.e. in STSDAS 
	format).

 CALLING SEQEUNCE:
	IMGread,image,hdr,[filename],[groupno],[/NoAssoc,/silent,/Astrmfix]

 OPTIONAL INPUT:
	FILENAME  The filename of the HEADER file (must have extention .xxh 
		where xx may be any two alphanumerics but usually hh.)  If 
		there is no extention supplied, .hhh and .hhd are assumed.  If
		this parameter is not supplied, a filename is prompted for, 
		either with PICKFILE() if widgets are available, else by
		text prompt.
	GROUP - This parameter specifies the GROUP number image to read from a
               file which contains multiple groups.  For example, for WF/PC
               images where all four chips are contained in one file, one may
               specify a GROUP of 0 to read PC5, 1 for PC6, 3 for PC8,
               0 to read WF1 for a WF image, etc.  Therefore, the range of
               GROUP is 0 to GCOUNT-1 (where GCOUNT is a header keyword.)
 OUTPUT:
	IMAGE - The returned array which contains the pixel information.  
		IMAGE will be of whatever datatype the header indicates (or 
		seems to... i.e. if BITPIX=32 but there is no DATATYPE keyword,
               IMGread assumes REAL*4 if BZERO is 0 or non-existant and
               INTEGER*4 if BZERO is not 0.  This is usually right, but not
               always.)
	H - The returned string array containing the image header 
		information as if SXHREAD were used.

 OPTIONAL KEYWORDS:
	NoAssoc -  This keyword controls how IDL reads the file.    If NoAssoc
		is set and non-zero then the READU function is used instead
		of the ASSOC function.    The user can select the type of
		read that gives the best performance on his particular setup.
		In general, the ASSOC function seems to be faster, but is more
		demanding on virtual memory.
	SILENT - If this keyword is set and non-zero, then the "Loading..." 
		message will not be printed.
	ASTRMFIX  Controls whether the procedure AstrmFix is run.  AstrmFix
               calculates an astrometric solution from the HST Spacecraft
               angle in the header.  CRPIXn and CRVALn are left alone.  Only
               CDn_n are changed.  The Default is now 0.  If you find
		preposterous astrometry information in the header of WFPC 1
		images, try setting this switch on.

 SIDE EFFECTS:
	For an image with group parameters, all parameters are extracted from
	the .HHD file and values are inserted into the returned header variable.
	To get the original header, use SXHREAD for these type of image files.
	The EXTGRP procedure takes care of this process.

 EXAMPLE:
	Read the WF/PC file named 'w0hd0203t.c1h' into IDL variables, IM and H.

	IDL> IMGREAD, im,h,'w0hd0203t.c1h'

 OTHER PROCEDURES CALLED:
	SXPAR, SXADDPAR, SXOPEN, SXHREAD, FDECOMP, WFPCREAD, PICKFILE, EXTGRP

 HISTORY:
	09-JUL-92 Header finally added to this procedure which has been in use
	 for two or more years.  All versions and header by Eric W. Deutsch
	01-APR-93 Made a few minor adjustments.  EWD.  (No, really)
	July 93 Added /NoAssoc, MAKE_ARRAY, removed GET_FILE W. Landsman (HSTX)
</PRE><P>
<STRONG>(See tmp1/imgread.pro)</STRONG><P>
<HR>
 
<A NAME="IMGROAM">
<H2>IMGROAM</H2></A>
<A HREF="#IMGREAD">[Previous Routine]</A>
<A HREF="#IMGTEXT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   IMGROAM
 PURPOSE:
   IMGroam is a program which is designed to simplify routine
   examination of images.  IMGroam provides facilities to easily move around
   an image, zooming, and displaying cursor coordinates both X,Y and RA,DEC
   if a plate solution is provided.  The stretch can be interacticely adjusted,
   facilities for creating and tranfering plate solutions are available.
 CALLING SEQEUNCE:
   IMGroam,image,header,[frame]
 INPUT:
   IMAGE     The 2D image array to be examined.
   HEADER    The corresponding string array GEIS header.  In fact, this
               parameter does not NEED to be supplied, and if it is not, then
               one can just examine the array passed with IMAGE.  If the
               array is an astronomical image, it is usually wise to supply
               the header.  But, for example, if one reads in a .GIF file,
               or other 2D data array, the array may be examined with
               IMGroam without supplying any header.
 OPTIONAL OUTPUT:
   FRAME     This parameter can return the currently displayed frame when
               IMGroam is exited.
 EXAMPLE:
   >IMGread,img,h                  ; Read in an image (Pickfile available)
   >IMGroam,img,h                  ; Examine the image
      or
   >tmp=indgen(512,512)            ; Create some array
   >IMGroam,tmp                    ; Use IMGroam to examine array
 HISTORY:
   25-MAY-90 Original Alpha Test Version 1.0 'completed' by Eric W. Deutsch
     (countless undocumented additions, revisions, etc.)
   02-DEC-92 DIST_COORD_CONV support added for UIT images.  EWD
   06-DEC-92 Version 3.1 completed.  EWD
   03-APR-93 Version 3.2 released.  EWD
</PRE><P>
<STRONG>(See tmp1/imgroam.pro)</STRONG><P>
<HR>
 
<A NAME="IMGTEXT">
<H2>IMGTEXT</H2></A>
<A HREF="#IMGROAM">[Previous Routine]</A>
<A HREF="#IMGUNDER">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   IMGtext
 PURPOSE:
   This procedure writes text onto the current graphics window.  Its
   purpose is to provide large, nice looking text with which to annotate
   images suitable for publication, since the Hershey Vector fonts often
   fall short of good publication quality at large sizes.  The drawback
   is that, since they are bitmapped fonts, only certain fonts and sizes
   are available.  However, by using the FONTCNVT utility, more can be
   added.
   One column of space is automatically provided on both sides of each
   character.  Additional space can be add with the spacing keyword.
 CALLING SEQEUNCE:
   IMGtext,xoffset,ybaseline,prtstring,fontname,[clearunder=]
 INPUT:
   XOFFSET   This is the X position where the first character is to begin.
               The actual character starts at X+1, but the space at the
               edge of the character begins at X.  This value is changed
               to reflect the new position of the 'cursor' as characters
               are written.
   YBASELINE This is the Y position of the baseline of the font.  Note that
               some characters of some fonts drop below the baseline.
   PRTSTRING This is the string of characters to write (e.g. 'Hello')
   FONTNAME  This is the string of the root filename of the font
               (e.g. 'bold24')
 OUTPUT:
   XOFFSET   The returned new position of the cursor.
 OPTIONAL KEYWORDS:
   CLEARUNDER  This keyword governs how the letter if written to the window
                  0  Text is written to the screen leaving the background
                  1  The space under the text is blanked out
                  2  One pixel all around each letter is blanked out
                       (default value)
   SPACING     This keyword specifies how many pixels of spacing between
                 letter is provided.  The default=2.
 EXAMPLE:
   x=100
   IMGtext,x,200,'Scale=30''''','bold16'
 HISTORY:
   03-NOV-1992  Version 1 Written  (E. Deutsch)
</PRE><P>
<STRONG>(See tmp1/imgtext.pro)</STRONG><P>
<HR>
 
<A NAME="IMGUNDER">
<H2>IMGUNDER</H2></A>
<A HREF="#IMGTEXT">[Previous Routine]</A>
<A HREF="#IMSCL">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
       IMGUNDER
 PURPOSE:
       Display image in same area as last plot.
 CATEGORY:
 CALLING SEQUENCE:
       imgunder, z
 INPUTS:
       z = scaled byte image to display.  in
 KEYWORD PARAMETERS:
       Keywords:
         /INTERP causes bilinear interpolation to be used,
           otherwise nearest neighbor interpolation is used.
 OUTPUTS:
 COMMON BLOCKS:
 NOTES:
       Notes: Do plot,/nodata first to setup plot area,
         then use imgunder to display image, then repeat
         plot with data, but with /noerase.
 MODIFICATION HISTORY:
       R. Sterner, 15 Feb, 1991

 Copyright (C) 1991, Johns Hopkins University/Applied Physics Laboratory
 This software may be used, copied, or redistributed as long as it is not
 sold and this copyright notice is reproduced on each copy made.  This
 routine is provided as is without any express or implied warranties
 whatsoever.  Other limitations apply as described in the file disclaimer.txt.
</PRE><P>
<STRONG>(See tmp1/imgunder.pro)</STRONG><P>
<HR>
 
<A NAME="IMSCL">
<H2>IMSCL</H2></A>
<A HREF="#IMGUNDER">[Previous Routine]</A>
<A HREF="#IMSTAT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>

 IMSCL is similar to BYTSCL except is uses a half-linear and half-logarithmic
 scale.

 Call> imscl,img-min,0,max,linearmax,top=
 e.g.: imscl,img-300,0,10000,500,top=48

 The example call produces a linear stretch of 300-500 for half of the
 dynamic range, and a logarithmic stretch from 500-10000 for the other
 half of the dynamic range.  This allows fine detail visible at low levels
 without burning out stars..  top=48 works the same way as bytscl

</PRE><P>
<STRONG>(See tmp1/imscl.pro)</STRONG><P>
<HR>
 
<A NAME="IMSTAT">
<H2>IMSTAT</H2></A>
<A HREF="#IMSCL">[Previous Routine]</A>
<A HREF="#IRDISP">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   IMSTAT
 DESCRIPTION:
   This procedure prints out various image "statistics" namely mean, max,
   minimum, and a sky value of a 20x20 pixel box centered at the supplied
   X,Y coorddinates.
 INPUT:
   X         The X pixel coordinate
   Y         The Y pixel coordinate
 OUTPUT:
   Printed statistics
   All passed variables remain unchanged
 HISTORY:
   27-MAY-94 Header added to old code by Eric W. Deutsch
</PRE><P>
<STRONG>(See tmp1/imstat.pro)</STRONG><P>
<HR>
 
<A NAME="IRDISP">
<H2>IRDISP</H2></A>
<A HREF="#IMSTAT">[Previous Routine]</A>
<A HREF="#IRSFLOAD">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 This procedure is the top level of the image display procedure set
 in the IMGroam environment.  It is not useful by itself.

</PRE><P>
<STRONG>(See tmp1/irdisp.pro)</STRONG><P>
<HR>
 
<A NAME="IRSFLOAD">
<H2>IRSFLOAD</H2></A>
<A HREF="#IRDISP">[Previous Routine]</A>
<A HREF="#IRSFOUT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   IRSFLoad
 PURPOSE:
   Load an IMGroam Star File (IRSF) specified by file into a structure.
 CALLING SEQEUNCE:
   IRSFload,filename,ss,/silent
 INPUT:
   FILENAME  The filename of the IRSF file (it is highly recommended that
               the file extensions are .irsf although it is not required.)
 OUTPUT:
   SS        The 'Saved_Stars' structure into which the file is read.
               int          stars    Number of stars stored
               intarr(1000)  ID       Some star number (sequential or not)
               strarr(1000)  Name     String Name for star
               dblarr(1000)  X        X Position of Star
               dblarr(1000)  Y        Y Position of Star
               dblarr(1000)  RA       RA Coordinate of Star
               dblarr(1000)  DEC      DEC Coordinate of Star
               fltarr(1000)  Mag      Magnitude of Star
 OPTIONAL INPUT:
   SILENT    If set, the 'n stars loaded' message will not print.
   BLANK     If set, then the filename is ignored and a blank structure
               is returned.
 HISTORY:
   10-DEC-92 Header finally added to this procedure which has been in use for
     three or more years.  Name changed from GS_SFLoad.  All versions
     and header by Eric W. Deutsch
</PRE><P>
<STRONG>(See tmp1/irsfload.pro)</STRONG><P>
<HR>
 
<A NAME="IRSFOUT">
<H2>IRSFOUT</H2></A>
<A HREF="#IRSFLOAD">[Previous Routine]</A>
<A HREF="#IRSFSAVE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   IRSFout
 PURPOSE:
   Convert an IRSF structure into a regular list file (e.g. for imalign)
 CALLING SEQEUNCE:
   IRSFout,filename,ss,[/XY,/RADEC,/ID]
 INPUT:
   FILENAME  The filename of the output file (e.g. stars.lis
   SS        The 'Saved_Stars' structure from which the file is generated.
 OPTIONAL INPUT:
   XY        If set, the X and Y coordinates are written.
   RADEC     If set, the RA and DEC coordinates are written.
   ID        If set, the ID's are written.
 HISTORY:
   15-JAN-95 Written by Eric W. Deutsch
   18-DEC-96 Added capability to write ID field.  Eric W. Deutsch
</PRE><P>
<STRONG>(See tmp1/irsfout.pro)</STRONG><P>
<HR>
 
<A NAME="IRSFSAVE">
<H2>IRSFSAVE</H2></A>
<A HREF="#IRSFOUT">[Previous Routine]</A>
<A HREF="#IR_ASTDISP">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   IRSFSave
 PURPOSE:
   Save an IMGroam Star File (IRSF) specified by file from the structure.
 CALLING SEQEUNCE:
   IRSFSave,filename,ss,/silent
 INPUT:
   FILENAME  The filename of the IRSF file (it is highly recommended that
               the file extensions are .irsf although it is not required.)
 OUTPUT:
   SS        The 'Saved_Stars' structure which is saved.
 HISTORY:
   10-DEC-92 Header finally added to this procedure which has been in use for
     three or more years.  Name changed from GS_SFSave.  All versions
     and header by Eric W. Deutsch
</PRE><P>
<STRONG>(See tmp1/irsfsave.pro)</STRONG><P>
<HR>
 
<A NAME="IR_ASTDISP">
<H2>IR_ASTDISP</H2></A>
<A HREF="#IRSFSAVE">[Previous Routine]</A>
<A HREF="#IR_CNTRD">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 This procedure handles display of cursor coordinates
 in the IMGroam environment.  It is not useful by itself.

</PRE><P>
<STRONG>(See tmp1/ir_astdisp.pro)</STRONG><P>
<HR>
 
<A NAME="IR_CNTRD">
<H2>IR_CNTRD</H2></A>
<A HREF="#IR_ASTDISP">[Previous Routine]</A>
<A HREF="#IR_DISP">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 PROCEDURE:
   IR_cntrd,image,xguess,yguess,xcen,ycen,FWHM,info=info
 PURPOSE:
   This procedure is called by IMGRoam so as to provide an indepdant
   method of calling a centroiding algorithm.  Several can be
   available.
</PRE><P>
<STRONG>(See tmp1/ir_cntrd.pro)</STRONG><P>
<HR>
 
<A NAME="IR_DISP">
<H2>IR_DISP</H2></A>
<A HREF="#IR_CNTRD">[Previous Routine]</A>
<A HREF="#IR_GETWINPOS">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 This procedure handles text display of various information
 in the IMGroam environment.  It is not useful by itself.

</PRE><P>
<STRONG>(See tmp1/ir_disp.pro)</STRONG><P>
<HR>
 
<A NAME="IR_GETWINPOS">
<H2>IR_GETWINPOS</H2></A>
<A HREF="#IR_DISP">[Previous Routine]</A>
<A HREF="#IR_KBDHNDLR">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 This procedure contains a half-hearted attempt at having standard window
 positions in the IMGroam environment.  It is not useful by itself.

</PRE><P>
<STRONG>(See tmp1/ir_getwinpos.pro)</STRONG><P>
<HR>
 
<A NAME="IR_KBDHNDLR">
<H2>IR_KBDHNDLR</H2></A>
<A HREF="#IR_GETWINPOS">[Previous Routine]</A>
<A HREF="#IR_PRINTFRAME">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 IR_KbdHndlr,image,img1,mx,my

 This is the main keyboard handler for IMGroam.  It calls the procedure
 User_Kbd first and then handles the default operations.  The use of
 common blocks are required to communicate with IMGroam.

 Calls: User_Kbd,image,img1,mx,my,KeyHit
   image  -  whole image
   img1   -  currently displayed frame
   mx     -  current x cursor position in whole image 
   my     -  current y cursor position in whole image
               center of lower left pixel is (0.00,0.00)
   KeyHit -  The (first) character hit.  Note that there may be more
               characters in the keyboard buffer and the first
               character could be an ESC, the first character of an
               escape sequence (e.g. up arrow).
   When adding a function to User_Kbd, be sure that the procedure does
   not disturb the value in KeyHit unless it processes the Key Hit, at
   which point it should set KeyHit='' so that if you are overriding the
   default key calls, they are not called, too...
   Remember to take case sensitivity into account!
   The keyboard buffer is flushed after both the User and default handler
   runs.
</PRE><P>
<STRONG>(See tmp1/ir_kbdhndlr.pro)</STRONG><P>
<HR>
 
<A NAME="IR_PRINTFRAME">
<H2>IR_PRINTFRAME</H2></A>
<A HREF="#IR_KBDHNDLR">[Previous Routine]</A>
<A HREF="#IR_ROAM">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 This procedure handles printing of the current frame
 in the IMGroam environment.  It is not useful by itself.

</PRE><P>
<STRONG>(See tmp1/ir_printframe.pro)</STRONG><P>
<HR>
 
<A NAME="IR_ROAM">
<H2>IR_ROAM</H2></A>
<A HREF="#IR_PRINTFRAME">[Previous Routine]</A>
<A HREF="#IR_WIDGETS">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 This procedure handles much of the interactive movement stuff
 in the IMGroam environment.  It is not useful by itself.

</PRE><P>
<STRONG>(See tmp1/ir_roam.pro)</STRONG><P>
<HR>
 
<A NAME="IR_WIDGETS">
<H2>IR_WIDGETS</H2></A>
<A HREF="#IR_ROAM">[Previous Routine]</A>
<A HREF="#IR_WIDGETS2">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 This procedure handles many widget tasks
 in the IMGroam environment.  It is not useful by itself.

 **** IMGRoam Widget System Setup ********************************************
</PRE><P>
<STRONG>(See tmp1/ir_widgets.pro)</STRONG><P>
<HR>
 
<A NAME="IR_WIDGETS2">
<H2>IR_WIDGETS2</H2></A>
<A HREF="#IR_WIDGETS">[Previous Routine]</A>
<A HREF="#IR_WIDGETS3">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 This procedure handles many widget tasks
 in the IMGroam environment.  It is not useful by itself.

 **** Setup Button/Coordinate Display Widget ******************************
</PRE><P>
<STRONG>(See tmp1/ir_widgets2.pro)</STRONG><P>
<HR>
 
<A NAME="IR_WIDGETS3">
<H2>IR_WIDGETS3</H2></A>
<A HREF="#IR_WIDGETS2">[Previous Routine]</A>
<A HREF="#LEGEND">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 This procedure handles many widget tasks
 in the IMGroam environment.  It is not useful by itself.

 **** Determine Boxsize **************************************
</PRE><P>
<STRONG>(See tmp1/ir_widgets3.pro)</STRONG><P>
<HR>
 
<A NAME="LEGEND">
<H2>LEGEND</H2></A>
<A HREF="#IR_WIDGETS3">[Previous Routine]</A>
<A HREF="#LINEBAR">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Name:
	legend
 Purpose:
	This procedure makes a legend for a plot.  The legend can contain
	a mixture of symbols, linestyles, and filled polygons (usersym).
 Examples:
	The call:
		legend,['diamond','asterisk','square'],psym=[4,2,6]
	produces:
		-----------------
		|		|
		|  <> diamond	|
		|  *  asterisk	|
		|  [] square	|
		|		|
		-----------------
	Each symbol is drawn with a plots command, so they look OK.
	Other examples are given in usage.
 Usage:
	legend,items,linestyle=linestyle	; vertical legend at upper left
	legend,items,psym=psym			; ditto except using symbols
	legend,items,psym=psym,/horizontal	; horizontal format
	legend,items,psym=psym,box=0		; sans border
	legend,items,psym=psym,delimiter='='	; embed an '=' betw psym & text
	legend,items,psym=psym,margin=2		; 2-character margin
	legend,items,psym=psym,position=pos	; position of legend
	legend,items,psym=psym,number=2		; plot two symbols, not one
	legend,items,/fill,psym=[8,8,8],colors=[10,20,30]; 3 filled squares
 Inputs:
	items = text for the items in the legend, a string array.
		You can omit items if you don't want any text labels.
 Optional Inputs:
	linestyle = array of linestyle numbers
	psym = array of plot symbol numbers.  If psym(i) is negative, then a
		line connects pts for ith item.  If psym(i) = 8, then the
		procedure usersym is called with vertices define in the 
		keyword usersym.
	N. B.: Choose either linestyle, psym, neither, or both.  If neither is
		present, only the text is output.  If both linestyle and
		psym parameters are present, they both have to have the
		same number of elements, and normal plot behaviour occurs.
		By default, if psym is positive, you get one point so there is
		no connecting line.  
 Optional Keywords:
	/help = flag to print header
	/horizontal = flag to make the legend horizontal
	/vertical = flag to make the legend vertical (D=vertical)
	box = flag to include/omit box around the legend (D=include)
	delimiter = embedded character(s) between symbol and text (D=none)
	colors = array of colors for plot symbols/lines (D=!color)
	textcolors = array of colors for text (D=!color)
	margin = margin around text measured in characters and lines
	spacing = line spacing (D=bit more than character height)
	pspacing = psym spacing (D=3 characters)
	charsize = just like !p.charsize for plot labels
	position = normalized coordinates of the upper left of the legend
	number = number of plot symbols to plot or length of line (D=1)
	usersym = 2-D array of vertices, cf. usersym in IDL manual. (D=square)
	/fill = flag to fill the usersym
 Outputs:
	legend to current plot device
 Optional Output Keywords:
	corners = 4-element array, like !p.position, of the normalized
		coords for the box (even if box=0): [llx,lly,urx,ury].
		Useful for multi-column or multi-line legends, for example,
		to make a 2-column legend, you might do the following:
		  c1_items = ['diamond','asterisk','square']
		  c1_psym = [4,2,6]
		  c2_items = ['solid','dashed','dotted']
		  c2_line = [0,2,1]
		  legend,c1_items,psym=c1_psym,corners=c1,box=0
		  legend,c2_items,line=c2_line,corners=c2,box=0,pos=[c1(2),c1(3)]
		  c = [c1(0)<c2(0),c1(1)<c1(1),c1(2)>c2(2),c1(3)>c1(3)]
		  plots,[c(0),c(0),c(2),c(2),c(0)],[c(1),c(3),c(3),c(1),c(1)],/norm
 Common blocks:
	none
 Procedure:
	If keyword help is set, call doc_library to print header.
 Restrictions:
	Here are some things that aren't implemented.
	It would be nice to allow data and device coords as well.
	An orientation keyword would allow lines at angles in the legend.
	An array of usersyms would be nice---simple change.
	An order option to interchange symbols and text might be nice.
	Somebody might like double boxes, e.g., with box = 2.
	Another feature might be a continuous bar with ticks and text.
 Side Effects:
 Modification history:
	write, 24-25 Aug 92, F K Knight (knight@ll.mit.edu)
	allow omission of items or omission of both psym and linestyle, add 
	  corners keyword to facilitate multi-column legends, 26 Aug 92, FKK
</PRE><P>
<STRONG>(See tmp1/legend.pro)</STRONG><P>
<HR>
 
<A NAME="LINEBAR">
<H2>LINEBAR</H2></A>
<A HREF="#LEGEND">[Previous Routine]</A>
<A HREF="#MKFCHART[1]">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
91apr26-if tiny<0. then make linebar ticks go up (case of gal absorb)
	-if zflag is negative or zero hold the z-value printing
	   (on the right side of the plots)
if tiny then csize = 0.50 else csize = 0.65
</PRE><P>
<STRONG>(See tmp1/linebar.pro)</STRONG><P>
<HR>
 
<A NAME="MKFCHART[1]">
<H2>MKFCHART[1]</H2></A>
<A HREF="#LINEBAR">[Previous Routine]</A>
<A HREF="#MKFCHART[2]">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	MKFCHART

 PURPOSE:
	Generate a simple finding chart, given an input of the Digitized
	Sky Survey (DSS) or the Guide Star Catalog (GSC).

 CATEGORY:
	APO software

 CALLING SEQUENCE:
	mkfchart,coords [,dssfile=,gscfile=,/ps,objname=,fieldsize=]

 INPUTS:
	coords: A string containing the J2000 coordinates of the target
		object in sexigesimal format.

 OPTIONAL INPUT KEYWORDS:
	dssfile: The filename of a Digitized Sky Survey (DSS) FITS image which
		contains the field and the surrounding region.

	gscfile: The filename of an HST Guide Star Catalog (GSC) extraction
		which contains the target field and the surrounding region.
		Note that since the limiting magnitude of the GSC is variable
		around 14th magnitude, the GSC is almost necessary.

	a10file: The filename of an USNO-A1.0 extraction
		which contains the target field and the surrounding region.

	ps:	If this keyword is set, the the output is directed to the
		PostScript file 'gdracq.ps' instead of the screen.  Alternately
		this keyword can be set to a string which is the filename.

	objname: A string which will be printed out as an object name at the
		top of a PostScript map.

	fieldsize: This keyword can specify a fieldsize other than some
		default value (DSS image size or 10 arcmin).

	polygon: Overlay a polygon with verticies [ra0,dec0,ra1,dec1,ra2,dec2,...]
		The polygon is not close automatically.

	interactive: Interactively draw SPIcam fields on the image.

	spifields: Overplot the SPIcam fields.

 OUTPUTS:
	Screen image or postscript file.

 COMMON BLOCKS:
	None.

 SIDE EFFECTS:
	None.

 RESTRICTIONS:
	None.

 PROCEDURE:
	Load DSS image if provided, rotate and display an appropriate region.
	Load GSC list if provided, display star symbols.  Finally, overlay
	a cross at the coordinates and labels.

 EXAMPLE:
	window,colors=50,xs=512
	whitesky,res='RED'
	coords='19 15 11.52  +10 56 45.1'
	apoguide,coords,dssfile='test08zr.fits',gscfile='test.gsclst'
	 (see separate instruction sheet for complete details)

 MODIFICATION HISTORY:
	11/16/96 Written by E. Deutsch based on APOGUIDE

</PRE><P>
<STRONG>(See tmp1/mkfchart.pro)</STRONG><P>
<HR>
 
<A NAME="MKFCHART[2]">
<H2>MKFCHART[2]</H2></A>
<A HREF="#MKFCHART[1]">[Previous Routine]</A>
<A HREF="#MROGUIDE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	MKFCHART

 PURPOSE:
	Generate a simple finding chart, given an input of the Digitized
	Sky Survey (DSS) or the Guide Star Catalog (GSC).

 CATEGORY:
	APO software

 CALLING SEQUENCE:
	mkfchart,coords [,dssfile=,gscfile=,/ps,objname=,fieldsize=]

 INPUTS:
	coords: A string containing the J2000 coordinates of the target
		object in sexigesimal format.

 OPTIONAL INPUT KEYWORDS:
	dssfile: The filename of a Digitized Sky Survey (DSS) FITS image which
		contains the field and the surrounding region.

	gscfile: The filename of an HST Guide Star Catalog (GSC) extraction
		which contains the target field and the surrounding region.
		Note that since the limiting magnitude of the GSC is variable
		around 14th magnitude, the GSC is almost necessary.

	a10file: The filename of an USNO-A1.0 extraction
		which contains the target field and the surrounding region.

	ps:	If this keyword is set, the the output is directed to the
		PostScript file 'gdracq.ps' instead of the screen.  Alternately
		this keyword can be set to a string which is the filename.

	objname: A string which will be printed out as an object name at the
		top of a PostScript map.

	fieldsize: This keyword can specify a fieldsize other than some
		default value (DSS image size or 10 arcmin).

	polygon: Overlay a polygon with verticies [ra0,dec0,ra1,dec1,ra2,dec2,...]
		The polygon is not close automatically.

	interactive: Interactively draw SPIcam fields on the image.

	spifields: Overplot the SPIcam fields.

 OUTPUTS:
	Screen image or postscript file.

 COMMON BLOCKS:
	None.

 SIDE EFFECTS:
	None.

 RESTRICTIONS:
	None.

 PROCEDURE:
	Load DSS image if provided, rotate and display an appropriate region.
	Load GSC list if provided, display star symbols.  Finally, overlay
	a cross at the coordinates and labels.

 EXAMPLE:
	window,colors=50,xs=512
	whitesky,res='RED'
	coords='19 15 11.52  +10 56 45.1'
	apoguide,coords,dssfile='test08zr.fits',gscfile='test.gsclst'
	 (see separate instruction sheet for complete details)

 MODIFICATION HISTORY:
	11/16/96 Written by E. Deutsch based on APOGUIDE

</PRE><P>
<STRONG>(See tmp1/mkfchart2.pro)</STRONG><P>
<HR>
 
<A NAME="MROGUIDE">
<H2>MROGUIDE</H2></A>
<A HREF="#MKFCHART[2]">[Previous Routine]</A>
<A HREF="#MYMMM">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	MROGUIDE

 PURPOSE:
	Generate a guide star acquisition map for the MRO guider camera.
	See the separate instruction sheet for complete instructions:
	(http://www.astro.washington.edu/deutsch/apoinfo/guider/guideacq.txt)

 CATEGORY:
	MRO software

 CALLING SEQUENCE:
	mroguide,instrument,coords [,dssfile=,gscfile=,/ps,objname=]

 INPUTS:
	instrument: A string specifying the desired primary instrument.
		Current choices are: MRO

	coords: A string containing the J2000 coordinates of the target
		onject in sexigesimal format.

 OPTIONAL INPUT KEYWORDS:
	dssfile: The filename of a Digital Sky Survey (DSS) FITS image which
		contains the field and the surrounding region.

	gscfile: The filename of an HST Guide Star Catalog (GSC) extraction
		which contains the target field and the surrounding region.
		Note that since the limiting magnitude of the GSC is variable
		around 14th magnitude, the GSC is not really necessary.

	ps:	If this keyword is set, the the output is directed to the
		PostScript file 'gdracq.ps' instead of the screen.  Alternately
		this keyword can be set to a string which is the filename.

	objname: A string which will be printed out as an object name at the
		top of a PostScript map.

	suggest: If this keyword is set (default), a list of GSC stars in
		the annulus is listed in brightness order.

	InstAng: Specify the desired Instrument Angle; the default is 0.

 OUTPUTS:
	None.

 COMMON BLOCKS:
	None.

 SIDE EFFECTS:
	None.

 RESTRICTIONS:
	None.

 PROCEDURE:
	Load DSS image if provided, rotate and display an appropriate region.
	Load GSC list if provided, display star symbols.  Finally, overlay
	the acquisition field map and labels.

 EXAMPLE:
	window,colors=50,xs=512
	whitesky,res='RED'
	coords='19 15 11.52  +10 56 45.1'
	mroguide,'tbird',coords,dssfile='test08zr.fits',gscfile='test.gsclst'
	 (see separate instruction sheet for complete details)

 MODIFICATION HISTORY:
	5/05/95 Written by E. Deutsch
	9/13/95 Improved background level determination.  E. Deutsch
	9/20/96 Updated to be similar to apoguide.pro.  E. Deutsch
</PRE><P>
<STRONG>(See tmp1/mroguide.pro)</STRONG><P>
<HR>
 
<A NAME="MYMMM">
<H2>MYMMM</H2></A>
<A HREF="#MROGUIDE">[Previous Routine]</A>
<A HREF="#OBJCENOM">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 replacement of MMM because MMM isn't so great

</PRE><P>
<STRONG>(See tmp1/mymmm.pro)</STRONG><P>
<HR>
 
<A NAME="OBJCENOM">
<H2>OBJCENOM</H2></A>
<A HREF="#MYMMM">[Previous Routine]</A>
<A HREF="#PICKFILE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME: 
   OBJCENOM
 PURPOSE:
   Compute "center of mass" in a box with the specified center and radius.
   This procedure is suited for irregular objects with multiple peaks that
   that would normall confuse a steller centroider.
 CALLING SEQUENCE: 
   OBJCENOM,img,xcenter,ycenter,xcen,ycen,radius,[/INFO]
 INPUTS:     
   IMG      Two dimensional image array
   XGUESS   Scalar giving X box center
   YGUESS   Scalar giving Y box center
   RADIUS   Scalar giving half-diameter of box within which to compute c.o.m.
              If not suppied, the radius will be prompted for
 OUTPUTS:   
   XCEN     The computed X centroid position.  -1 if unable to centroid
   YCEN     The computed Y centroid position.  -1 if unable to centroid
        NOTE: The convention is such that the CENTER of a pixel is (n.00,n.00)
  OPTIONAL OUTPUT KEYWORDS:
   INFO     Return some informational parameters?
 PROCEDURE: 
   Extract box. determine a sky value from square annulus from radius to
   radius+3.  computer center of mass (counts) in the box.
   Actually, the sky is pretty irrelevant, but I do it just for fun.
 MODIFICATION HISTORY:
   24-JAN-94 Written by Eric Deutsch
</PRE><P>
<STRONG>(See tmp1/objcenom.pro)</STRONG><P>
<HR>
 
<A NAME="PICKFILE">
<H2>PICKFILE</H2></A>
<A HREF="#OBJCENOM">[Previous Routine]</A>
<A HREF="#PIXEDIT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
       PICKFILE

 PURPOSE:
       This function allows the user to interactively pick a file.  A file
       selection tool with a graphical user interface is created.  Files
       can be selected from the current directory or other directories.

 CATEGORY:
       Widgets.

 CALLING SEQUENCE:
       Result = PICKFILE()

 KEYWORD PARAMETERS:

       FILE:   A string value for setting the initial value of the
               selection. Useful if there is a default file

       GET_PATH: Set to a named variable. Returns the path at the
               time of selection.

       GROUP:  The widget ID of the widget that calls PICKFILE.  When this
               ID is specified, a death of the caller results in the death of
               the PICKFILE widget application.

       READ:   Set this keyword to make the title of the PICKFILE window
               "Select File to Read".

       WRITE:  Set this keyword to make the title of the PICKFILE window
               "Select File to Write".

       PATH:   The initial path to select files from.  If this keyword is
               not set, the current directory is used.

       FILTER: A string value for filtering the files in the file list.  This
               keyword is used to reduce the number of files to choose from.
               The user can modify the filter unless the FIX_FILTER keyword
               is set.  Example filter values might be "*.pro" or "*.dat".

       FIX_FILTER: When this keyword is set, only files that satisfy the
               filter can be selected.  The user has no ability to modify
               the filter and the filter is not shown.

       TITLE:  A scalar string to be used for the window title.  If it is
               not specified, the default title is "Select File"

       NOCONFIRM: Return immediately upon selection of a file.  The default
               behavior is to display the selection and then return the
               file when the user uses the "ok" button.

       MUST_EXIST: When set, only files that actually exist can be selected.

 OUTPUTS:
       PICKFILE returns a string that contains the name of the file selected.
       If no file is selected, PICKFILE returns a null string.

 COMMON BLOCKS:
       NONE.

 SIDE EFFECTS:
       NONE.

 RESTRICTIONS:
       Only one instance of the PICKFILE widget can be running at one time.

 PROCEDURE:
       Create and register the widget and then exit, returning the filename
       that was picked.

 EXAMPLE:
       Create a PICKFILE widget that lets users select only files with
       the extensions 'pro' and 'dat'.  Use the 'Select File to Read' title
       and store the name of the selected file in the variable F.  Enter:

               F = PICKFILE(/READ, FILTER = '*.pro *.dat')

 MODIFICATION HISTORY:
       Written by:     Steve Richards, April, 1991
       July, 1991      Added a FILTER keyword to allow users
                       to select files with a given extension or
                       extensions.
       August, 1991    Fixed bugs caused by differences between
                       spawned ls commands on different machines.
       September, 1991 Made Myfindfile so only one pass was
                       necessary to find files and directories.
       3/92 - ACY      Corrected initialization of dirsave, change spawn
                       command to "ls -lL" and added case for links
                       add NOCONFIRM keyword for auto exiting on selection
       8/92 - SMR      Rewrote pickfile as a compound widget.
       10/92 - SMR     Fixed a bug where extremely large file namess didn't
                       show up properly in the file list or as return
                       values.
       12/92 - JWG     Add better machine dependency code
       1/93 - JWG      Added FILE, GET_PATH keywords.
       1/93 - TAC      Added Windows Common dialog pickfile code
       2/93 - SMR      Fixed the documentation example for multiple extensions
       1/94 - KDB      If directory had no execute permission on Unix
                       platforms, CD fails and causes error. Added check
                       for this. Increased spawn speed by using /sh for unix.
                       Added -a switch to ls so that all files can be found
                       on unix machines.
       2/94 - KDB	Values passed to CD cannot end in a '\' on DOS
			platforms. Program would crash if the PATH keyword
			was supplied a value that ended with a "\". Added
		        a check for this.
	3/94 - BMH	Deleted the reference here to OS_PICKFILE for the
			Unix platforms and created an IDL routine to
			to call the Mac and Windows specific OS_PICKFILE
			routines.  This solved the saving and restoring on
	 		different platforms problem.
	4/94 - KDB      The vms call to lib$findfile in valid_dir was
		        commented out. This caused errors when path was
			changed by user. Uncommented. In Valid_Dir, with
			vms the type of directory specification was not
		        checked (directory can be a path or a filename):
			Fixed this. In dirlist section of event handler,
		        a "[-]" would get trimmed to "" and cause error:
			Fixed.
	8/94 - ACY      Change the spawn command in getdirs to send error
			output to /dev/null.
	12/94 - DJE	Fix the FIX_FILTER option for the MacOS.
	1/96 - RPM	Fixed reading of directories for when Unix long listing
			(ls -l) does not align columns.
	3/96 - LP	Implemented widget_pickfile in Motif
                       (xmFileSelectionBox). Conformed to widget_...
                       mechanism for all platforms.
			Used Motif widget_pickfile, removed file, directory
			internal IDL handling.
	4/96 - LP	Renamed widget_pickfile to dialog_pickfile.

 Note. This routine is maintained for compatibility reason. New system
       routine dialog_pickfile should be used instead.
</PRE><P>
<STRONG>(See tmp1/pickfile.pro)</STRONG><P>
<HR>
 
<A NAME="PIXEDIT">
<H2>PIXEDIT</H2></A>
<A HREF="#PICKFILE">[Previous Routine]</A>
<A HREF="#PIXEDIT2">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 PIXEDIT is a primitive Cosmic Ray remover.  I replaces the nxn section
 of the image centered on the given X,Y with some random continuum-level stuff
   Call: pixedit,image,mx,my
</PRE><P>
<STRONG>(See tmp1/pixedit.pro)</STRONG><P>
<HR>
 
<A NAME="PIXEDIT2">
<H2>PIXEDIT2</H2></A>
<A HREF="#PIXEDIT">[Previous Routine]</A>
<A HREF="#PRINTPATH">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 PIXEDIT is a primitive Cosmic Ray remover.  I replaces the 3x3 section
 of the image centered on the given X,Y with some random continuum-level stuff
   Call: pixedit,image,mx,my
</PRE><P>
<STRONG>(See tmp1/pixedit2.pro)</STRONG><P>
<HR>
 
<A NAME="PRINTPATH">
<H2>PRINTPATH</H2></A>
<A HREF="#PIXEDIT2">[Previous Routine]</A>
<A HREF="#PSCLOSE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   PRINTPATH
 PURPOSE:
   This program prints out the current !PATH in a column on unix machines.
   (or other "colon-separated !PATH variables)
 CALLING SEQEUNCE:
   printpath
</PRE><P>
<STRONG>(See tmp1/printpath.pro)</STRONG><P>
<HR>
 
<A NAME="PSCLOSE">
<H2>PSCLOSE</H2></A>
<A HREF="#PRINTPATH">[Previous Routine]</A>
<A HREF="#PSLANDFIX">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   PSCLOSE

 PURPOSE:
   This procedure closes the POSTSCRIPT output mode and returns the mode to
   the device when SETPS was called.  The POSTSCRIPT output is sent to the 
   PostScript file and may also optionally be sent automatically to the printer.
   It is designed to be used in conjunction with SETPS.

 CALLING SEQEUNCE:
   PSCLOSE,[autoprint],[queue],[/silent,/autoprint,autoprint='']

 OPTIONAL INPUT:
   AUTOPRINT Specifies whether IDL.PS should automatically be sent to
               the printer queue (0=NO, 1=Last or Default Printer,
               2=Choose Printer from list)
   QUEUE     Specifies the queue to which the plot is automatically
               sent in AUTOPRINT=1   (Default from cluster info. file)

 OPTIONAL KEYWORDS:
   AUTOPRINT Specifies whether IDL.PS should automatically be sent to
               the printer determined by:
                 0=NO
                 1=Last Printer printed to (PSCLOSE) or the Default Printer
                 2=Choose Printer from list
                 string=assumed to be the Queue Name.
   SILENT    Indicates that none of the informational messages are printed.

 HISTORY:
   11-JUL-90 Version 1 written by Eric Deutsch
   26-MAY-92 Proper header and other minor modifications. EWD
   23-OCT-92 Modified to use list of printers and to work with UNIX.  EWD
   06-FEB-93 Added support for filenames other than idl.ps.  EK & EWD
   96-OCT-16 Get rid of FOS_POST, as it is gone. rcb
</PRE><P>
<STRONG>(See tmp1/psclose.pro)</STRONG><P>
<HR>
 
<A NAME="PSLANDFIX">
<H2>PSLANDFIX</H2></A>
<A HREF="#PSCLOSE">[Previous Routine]</A>
<A HREF="#PSOUT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   PSLANDFIX

 PURPOSE:
   Fix the upside-down landscape that IDL generates.  Probably only works
   with the output of setps,/land

 CALLING SEQEUNCE:
   pro pslandfix,[filename]

 INPUT:
   FILENAME   Name the idl PostScript file to fix.  Default is 'idl.ps'

 OUTPUT:
   Fixed PostScript file
 NOTES:
   none
 HISTORY:
   10-AUG-95 Version 1 written    E. Deutsch
</PRE><P>
<STRONG>(See tmp1/pslandfix.pro)</STRONG><P>
<HR>
 
<A NAME="PSOUT">
<H2>PSOUT</H2></A>
<A HREF="#PSLANDFIX">[Previous Routine]</A>
<A HREF="#QAPER">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   PSOUT
 PURPOSE:
   This procedure writes the specified image to a postscript file IDL.PS and
   automatically sends it to the printer is the flag is set.
 CALLING SEQEUNCE:
   pro psout,image,xsize,ysize,xoffset,yoffset,[/color,ctable=,
     autoprint=,/inverse]
 INPUT:
   IMAGE     2D array to be printed or IDL window number to read and print.
               It should be a BYTE array or only the least significant byte
               is used for display.
 OPTIONAL INPUT:
   XSIZE     Width of image in inches
   YSIZE     Height of image in inches
   XOFFSET   Lwr-lft corner of image starts XOFFSET inches from the
               left edge of paper.
   YOFFSET   Lwr-lft corner of image starts YOFFSET inches from the
               bottom edge of the paper.
 OPTIONAL KEYWORDS:
   AUTOPRINT Specifies whether IDL.PS should automatically be sent to
               the printer determined by:
                 0=NO
                 1=Last Printer printed to (PSCLOSE) or the Default Printer
                 2=Choose Printer from list
                 string=assumed to be the Queue Name.
   INVERSE   If set, TV,255-image is used which will yield a white sky for
               BYTE type images. (1=YES, 0=no)
   COLOR     Specifies whether the output is to be color Postscript or not.
               (1=YES, 0=no)
   BITS      Number of BitsPerPixel to use.  Default is 8.
   CTABLE    The optional keyword allows the user to specify a color table.
             If CTABLE is a BYTARR(3,256) this array is used as the table.
             If CTABLE is a scalar LOADCT is run with this parameter.
             If CTABLE is not specified, the current color table loaded in
               the COMMON block "colors" (CURRENT set) is used.  If no table
               has been previously loaded, LOADCT is run and the user must
               type in a color.
   DONTCLOSE If this keyword is set, then the PostScript channel is left open
               and the user must manually close it.  However, this allows
               the user to send more output over the image (e.g. annotation)
   FILENAME  This keyword allows the PostScript filename to be specified.
               The default is 'idl.ps'
 OUTPUT:
   IDL.PS    Postscript File
   All passed variables remain unchanged
 NOTES:
   none
 HISTORY:
   18-JUN-90 Version 1 written    E. Deutsch
   27-FEB-92 Added Color capability and automatic image sizing.  Parameters
               were changed to keywords.  EWD
   14-MAY-92 Added STScI specifiic /PARAM=LAYUP needed to override the default
               margins on the 3C Colormate PS printer.  Help from Greg
               McLesky to set up the override.  EWD
   27-MAY-92 Added IDL_SYSDEF support for keywords PSTSCRPT and CLRPSCPT. EWD
   07-FEB-92 Added /DONTCLOSE and FILENAME= keyword.  EWD
</PRE><P>
<STRONG>(See tmp1/psout.pro)</STRONG><P>
<HR>
 
<A NAME="QAPER">
<H2>QAPER</H2></A>
<A HREF="#PSOUT">[Previous Routine]</A>
<A HREF="#QPHOT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
   if (not silent) then print,'(inner,outer) radius=',vect(skyaper)
</PRE><P>
<STRONG>(See tmp1/qaper.pro)</STRONG><P>
<HR>
 
<A NAME="QPHOT">
<H2>QPHOT</H2></A>
<A HREF="#QAPER">[Previous Routine]</A>
<A HREF="#QUICKSPLIT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
  PCPsf=[0.151,0.189,0.227,0.253,0.276,0.302,0.324,0.344,0.357,0.370]
	; derived from Tiny Tim B PC Psf

</PRE><P>
<STRONG>(See tmp1/qphot.pro)</STRONG><P>
<HR>
 
<A NAME="QUICKSPLIT">
<H2>QUICKSPLIT</H2></A>
<A HREF="#QPHOT">[Previous Routine]</A>
<A HREF="#QUICKSPLIT2">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 QuickSplit

 This program is supposed to be a real quick and dirty CR-split program

 IDL> quicksplit,image1,image2,[mindiff=,ignorelev=]

 image1 and image2 are the two images to be split
 mindiff= is a keyword for the minimum difference considered to be a CR
 ignorelev= is a keyword which specifies the level above which CR's are
      not to be checked for. (like stars)
 default values are 20 and 100 respectively

</PRE><P>
<STRONG>(See tmp1/quicksplit.pro)</STRONG><P>
<HR>
 
<A NAME="QUICKSPLIT2">
<H2>QUICKSPLIT2</H2></A>
<A HREF="#QUICKSPLIT">[Previous Routine]</A>
<A HREF="#RADPROF[1]">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 QuickSplit2

 This program is supposed to be a real quick and dirty CR-split program

 IDL> quicksplit,image1,image2,[mindiff=,ignorelev=]

 image1 and image2 are the two images to be split
 mindiff= is a keyword for the minimum difference considered to be a CR
 ignorelev= is a keyword which specifies the level above which CR's are
      not to be checked for. (like stars)
 default values are 20 and 100 respectively

</PRE><P>
<STRONG>(See tmp1/quicksplit2.pro)</STRONG><P>
<HR>
 
<A NAME="RADPROF[1]">
<H2>RADPROF[1]</H2></A>
<A HREF="#QUICKSPLIT2">[Previous Routine]</A>
<A HREF="#RADPROF[2]">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
NAME:
      RADPROF
PURPOSE:
      Plot a radial profile of a (stellar) object and overplot a gaussian
      fit.  Also prints out some fit parameters, e.g. Sky, FWHM, Max, Total.
CALLING SEQUENCE:
      RADPROF,image,xcen,ycen,radius,/oplot,expand=nn
INPUTS:
      IMAGE  - Input image
      XCEN   - Centroid (exact!) X position of star (scalar!)
      YCEN   - Centroid (exact!) Y position of star (scalar!)
      RADIUS - Radius to examine (and fit) star (scalar)
OPTIONAL INPUTS:
      OPLOT  - Do an OPLOT instead of a PLOT
      EXPAND - Does a cubic interpolative expansion of the object before
                 doing the radial plot.  This has the advantage of generating
                 more data points, but is not particularly honest.  It
                 also doesn't gain you much, and probably should be avoided.
OUTPUTS:
      Plots a radial profile to graphics channel with overlay fit.
      Prints in a row:
        X,Y  - X,Y centroid of star (AS GIVEN!) This must be exact
        Sky  - Sky value derived from fit.  may be too high if radius too smal
        FWHM - Derived FWHM from fitted gaussian
        Max  - Derived Maximum of fitted gaussian (not max pixel value!)
        Total- Derived total volume of fitted gaussian 
PROCEDURE:
      Generate a plot of pixel value versus radius of the star.  Symmetrize
      the plot and fit a gaussian using USERLIB GAUSSFIT.  Plot final fit
      and print out some useful fitted parameters
MODIFICATION HISTORY
      06-JUN-94  Written by Eric W. Deutsch
</PRE><P>
<STRONG>(See tmp1/radprof.pro)</STRONG><P>
<HR>
 
<A NAME="RADPROF[2]">
<H2>RADPROF[2]</H2></A>
<A HREF="#RADPROF[1]">[Previous Routine]</A>
<A HREF="#RDLINES">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
NAME:
      RADPROF
PURPOSE:
      Plot a radial profile of a (stellar) object and overplot a gaussian
      fit.  Also prints out some fit parameters, e.g. Sky, FWHM, Max, Total.
CALLING SEQUENCE:
      RADPROF,image,xcen,ycen,radius,/oplot,expand=nn
INPUTS:
      IMAGE  - Input image
      XCEN   - Centroid (exact!) X position of star (scalar!)
      YCEN   - Centroid (exact!) Y position of star (scalar!)
      RADIUS - Radius to examine (and fit) star (scalar)
OPTIONAL INPUTS:
      OPLOT  - Do an OPLOT instead of a PLOT
      EXPAND - Does a cubic interpolative expansion of the object before
                 doing the radial plot.  This has the advantage of generating
                 more data points, but is not particularly honest.  It
                 also doesn't gain you much, and probably should be avoided.
OUTPUTS:
      Plots a radial profile to graphics channel with overlay fit.
      Prints in a row:
        X,Y  - X,Y centroid of star (AS GIVEN!) This must be exact
        Sky  - Sky value derived from fit.  may be too high if radius too smal
        FWHM - Derived FWHM from fitted gaussian
        Max  - Derived Maximum of fitted gaussian (not max pixel value!)
        Total- Derived total volume of fitted gaussian 
PROCEDURE:
      Generate a plot of pixel value versus radius of the star.  Symmetrize
      the plot and fit a gaussian using USERLIB GAUSSFIT.  Plot final fit
      and print out some useful fitted parameters
MODIFICATION HISTORY
      06-JUN-94  Written by Eric W. Deutsch
</PRE><P>
<STRONG>(See tmp1/radprof2.pro)</STRONG><P>
<HR>
 
<A NAME="RDLINES">
<H2>RDLINES</H2></A>
<A HREF="#RADPROF[2]">[Previous Routine]</A>
<A HREF="#SETPS">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>

 read line lists

</PRE><P>
<STRONG>(See tmp1/rdlines.pro)</STRONG><P>
<HR>
 
<A NAME="SETPS">
<H2>SETPS</H2></A>
<A HREF="#RDLINES">[Previous Routine]</A>
<A HREF="#SKYCALC">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   SETPS

 PURPOSE:
   This procedure sets up the output channel for POSTSCRIPT output.
   Designed to be used in conjunction with PSCLOSE.

 CALLING SEQEUNCE:
   SETPS,[xsize,ysize],[xoffset,yoffset],[/landscape,/silent]

 OPTIONAL INPUT:
   XSIZE     Width of the output in inches
   YSIZE     Height of the output in inches
   XOFFSET   Lwr-lft corner of the output starts XOFFSET inches from the
               left edge of paper.
   YOFFSET   Lwr-lft corner of the output starts YOFFSET inches from the
               bottom edge of the paper.

 OPTIONAL KEYWORDS:
   LANDSCAPE Specifies that the output is to be in Landscape (sideways) mode.
   SILENT    Indicates that none of the informational messages are printed.
   TOP       This keyword generally is only used when no other parameters
               are specified.  It moves the portrait 7x7 inch plot to
               the top of the page instead of the default bottom.  This is
               especially useful for putting plots so that there is room
               for the caption at the bottom.
   FILENAME  This keyword specifies the name of the PostScript file.  The
               default value is 'idl.ps'

 HISTORY:
   11-JUL-90 Version 1 written by Eric Deutsch
   26-MAY-92 Proper header and other minor modifications. EWD
   12-NOV-92 Added /TOP keyword.  EWD
   06-FEB-92 Added FILENAME= keyword.  EK & EWD
</PRE><P>
<STRONG>(See tmp1/setps.pro)</STRONG><P>
<HR>
 
<A NAME="SKYCALC">
<H2>SKYCALC</H2></A>
<A HREF="#SETPS">[Previous Routine]</A>
<A HREF="#SKYCHECK1">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
    print,vect([AX1*.1,AX1-AX1*.1,i*.01*(AX2*.9)+AX2*.05])
</PRE><P>
<STRONG>(See tmp1/skycalc.pro)</STRONG><P>
<HR>
 
<A NAME="SKYCHECK1">
<H2>SKYCHECK1</H2></A>
<A HREF="#SKYCALC">[Previous Routine]</A>
<A HREF="#SKYHORIZ">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
  radec='06 01 47.287  +23 24 54.16'	; 0558+234
  radec='05 11 32.621  +38 09 13.31'	; 0508+380
  radec='11 19 00      +30 00 00'	; WD1
  radec='14 00 00      +30 00 00'	; WD2
  radec='15 13 22.8    -09 10 08'	; GRISM C star (and odd spec)
  radec='08 42  4.456  +33 42 58.83'	; KUV 08389+3354
  radec='10 0   0      +33 0  0'	; KUV 08389+3354
</PRE><P>
<STRONG>(See tmp1/skycheck1.pro)</STRONG><P>
<HR>
 
<A NAME="SKYHORIZ">
<H2>SKYHORIZ</H2></A>
<A HREF="#SKYCHECK1">[Previous Routine]</A>
<A HREF="#SKYLINE122">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   SKYHORIZ

 PURPOSE:
   This program is designed to show how a given object (i.e. RA, DEC)
   tracks across the sky during a specified night.  The program gives
   two forms of output: 1) a table listing Zenith Distance, Airmass,
   Hour Angle, UT, local time, and positions of the moon as well during
   a specified night; and 2) a plot of how the object and the moon
   track across the sky.  Time interval is always 6pm to 6am local time.

 CALLING SEQEUNCE:
   SkyPos

 INPUT:
   None.  All required information is prompted for.

 OUTPUT:
   A table and a plot.  See description above

 EXAMPLE:

 HISTORY:
   17-FEB-94 Version 1 written by Eric W. Deutsch
</PRE><P>
<STRONG>(See tmp1/skyhoriz.pro)</STRONG><P>
<HR>
 
<A NAME="SKYLINE122">
<H2>SKYLINE122</H2></A>
<A HREF="#SKYHORIZ">[Previous Routine]</A>
<A HREF="#SKYPOS[1]">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
  print,'Skyvalue=',strn(av1),', RMS=',strn(rms1)
</PRE><P>
<STRONG>(See tmp1/skyline122.pro)</STRONG><P>
<HR>
 
<A NAME="SKYPOS[1]">
<H2>SKYPOS[1]</H2></A>
<A HREF="#SKYLINE122">[Previous Routine]</A>
<A HREF="#SKYPOS[2]">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   SKYPOS

 PURPOSE:
   This program is designed to show how a given object (i.e. RA, DEC)
   tracks across the sky during a specified night.  The program gives
   two forms of output: 1) a table listing Zenith Distance, Airmass,
   Hour Angle, UT, local time, and positions of the moon as well during
   a specified night; and 2) a plot of how the object and the moon
   track across the sky.  Alternately, the data can be printed for a
   single specified UT.

 CALLING SEQEUNCE:
   SkyPos,[/noplot]

 INPUT:
   None.  All required information is prompted for.

 OUTPUT:
   A table and a plot.  See description above

 EXAMPLE:

 HISTORY:
   17-FEB-94 Version 1 written by Eric W. Deutsch
</PRE><P>
<STRONG>(See tmp1/skypos.pro)</STRONG><P>
<HR>
 
<A NAME="SKYPOS[2]">
<H2>SKYPOS[2]</H2></A>
<A HREF="#SKYPOS[1]">[Previous Routine]</A>
<A HREF="#SKY_VALUE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   SKYPOS

 PURPOSE:
   This program is designed to show how a given object (i.e. RA, DEC)
   tracks across the sky during a specified night.  The program gives
   two forms of output: 1) a table listing Zenith Distance, Airmass,
   Hour Angle, UT, local time, and positions of the moon as well during
   a specified night; and 2) a plot of how the object and the moon
   track across the sky.  Alternately, the data can be printed for a
   single specified UT.

 CALLING SEQEUNCE:
   SkyPos,[/noplot]

 INPUT:
   None.  All required information is prompted for.

 OUTPUT:
   A table and a plot.  See description above

 EXAMPLE:

 HISTORY:
   17-FEB-94 Version 1 written by Eric W. Deutsch
</PRE><P>
<STRONG>(See tmp1/skypos2.pro)</STRONG><P>
<HR>
 
<A NAME="SKY_VALUE">
<H2>SKY_VALUE</H2></A>
<A HREF="#SKYPOS[2]">[Previous Routine]</A>
<A HREF="#SLITREAD">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 INPUTS:
	p - your image
	bitpix - number of bits/pixel
	percent - percent of borders to ignore in the computation

 OUTPUTS:
	sky - estimate sky value
	maxval - estimated upper value


 Modified May 2, 1991 DJL  added percent parameter (which used to be hard
		coded at 10.0%)

 COMPUTE SKY
</PRE><P>
<STRONG>(See tmp1/sky_value.pro)</STRONG><P>
<HR>
 
<A NAME="SLITREAD">
<H2>SLITREAD</H2></A>
<A HREF="#SKY_VALUE">[Previous Routine]</A>
<A HREF="#SPILIST">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
      print,'WARNING: slit was not fit for.  Assuming slit position of 103.8'
</PRE><P>
<STRONG>(See tmp1/slitread.pro)</STRONG><P>
<HR>
 
<A NAME="SPILIST">
<H2>SPILIST</H2></A>
<A HREF="#SLITREAD">[Previous Routine]</A>
<A HREF="#SPLFIT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 No formal header yet.  See the documentation in
   http//www.astro.washington.edu/deutsch/apoinfo.html
</PRE><P>
<STRONG>(See tmp1/spilist.pro)</STRONG><P>
<HR>
 
<A NAME="SPLFIT">
<H2>SPLFIT</H2></A>
<A HREF="#SPILIST">[Previous Routine]</A>
<A HREF="#SPLIE2">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
			splfit

 driver routine for splinefit to compute least squares spline
 with equally spaced nodes.

 CALLING SEQUENCE:
	fit = splfit(x,y,nodes,xs,ys)

 INPUTS:
	x - x data vector
	y - y data vector
	nodes - number of spline nodes

 OUTPUT:
	the least square spline, evaluated at points x, is returned
	as the function value.

 OPTIONAL OUTPUTS:
	xs - x positions of the least squares spline
	ys - y positions of the least sqaures spline

 HISTORY:
	version 1  D. Lindler   May 1989
	version 2  DJL/ACC	1/22/92		Moved to IDL Version 2
	14-JUL-95 Deutsch renamed 'sfit' to 'splfit' since IDL now includes
		a routine called sfit (surface fitting)
</PRE><P>
<STRONG>(See tmp1/splfit.pro)</STRONG><P>
<HR>
 
<A NAME="SPLIE2">
<H2>SPLIE2</H2></A>
<A HREF="#SPLFIT">[Previous Routine]</A>
<A HREF="#SPLIN2">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
			splie2

 Given an M by N tabulated function YA, and tabulated independent variables
 X1A (M values) and X2A (N values), this routine constructs one-dimensional
 natural cubic splines of the rows of YA and returns the second derivatives
 in the array Y2A.

 SOURCE:
	Numerical Recipes, 1986. (page 100)
 
 CALLING SEQUENCE:
	splie2,x1a,x2a,ya,m,n,y2a

 INPUTS:
	x1a - independent variable vector (first dimension)
	x2a - independent variable vector (second dimension)
	ya  - dependent variable array
	m   - length of first dimension
	n   - length of second dimension

 OUTPUTS:
	y2a- second derivative array

 HISTORY:
	converted to IDL, D. Neill, October, 1991
</PRE><P>
<STRONG>(See tmp1/splie2.pro)</STRONG><P>
<HR>
 
<A NAME="SPLIN2">
<H2>SPLIN2</H2></A>
<A HREF="#SPLIE2">[Previous Routine]</A>
<A HREF="#SPLINEFIT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
			splin2

 Given X1A, X2A, YA, M, N as described in SPLIE2.PRO and Y2A as produced by
 that routine, and given a desired interpolating point X1, X2, this routine
 returns an interpolated function value Y by bicubic spline interpolation.

 SOURCE:
	Numerical Recipes, 1986. (page 101)
 
 CALLING SEQUENCE:
	splin2,x1a,x2a,ya,y2a,m,n,x1,x2,y

 INPUTS:
	x1a - independent variable vector (first dimension)
	x2a - independent variable vector (second dimension)
	ya  - dependent variable array
	y2a - second derivative array (as produced by SPLIE2.PRO)
	m   - length of first dimension
	n   - length of second dimension
	x1  - first coordinate of interpolating point
	x2  - second coordinate of interpolating point

 OUTPUTS:
	y   - bicubic spline interpolated function value

 HISTORY:
	converted to IDL, D. Neill, October, 1991
</PRE><P>
<STRONG>(See tmp1/splin2.pro)</STRONG><P>
<HR>
 
<A NAME="SPLINEFIT">
<H2>SPLINEFIT</H2></A>
<A HREF="#SPLIN2">[Previous Routine]</A>
<A HREF="#SPLINF">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	SPLINEFIT
 PURPOSE:
	Non-linear least squares fit to a cubic spline function of an
	arbitrary number of nodes.
 CATEGORY:
	E2 - Curve and Surface Fitting
 CALLING SEQUENCE:
	YFIT = SPINEFIT(X,Y,W,XS,YS,SIGYS,DELY)
 INPUTS:
	X = Row vector of independent variables.
	Y = Row vector of dependent variable, same length as x.
	W = Row vector of weights, same length as x and y.
		For no weighting
		w(i) = 1., instrumental weighting w(i) =
		1./y(i), etc.
	XS = Vector containing the x-positions of the spline nodes
	YS = Vector containing the intial y-position for the spline
		at each node (same length as XS)
 OPTIONAL INPUTS:
	DELY = distance to use in computing numerical derivatives
		with respect to YS values.  The distance is DELY*YS(i)
		(Default= 0.001)

 OUTPUTS:
	YS = Vector of parameters containing fit.
	Function result = YFIT = Vector of calculated
		values. YFIT=CSPLINE(XS,YS,X)
 OPTIONAL OUTPUT PARAMETERS:
	Sigys = Vector of standard deviations for parameters
		ys.
	
 COMMON BLOCKS:
	NONE.
 RESTRICTIONS:
	NONE.
 PROCEDURE:
	Copied from "CURFIT", least squares fit to a non-linear
	function, pages 237-239, Bevington, Data Reduction and Error
	Analysis for the Physical Sciences.

	"This method is the Gradient-expansion algorithm which
	compines the best features of the gradient search with
	the method of linearizing the fitting function."

	Iterations are perform until the chi square changes by
	only 0.1% or until 20 iterations have been performed.

	The initial guess of the parameter values should be
	as close to the actual values as possible or the solution
	may not converge.

 MODIFICATION HISTORY:
	Modified (D. Lindler, Feb. 87) version of IDL routine CURVEFIT
	written by DMS, RSI, September, 1982.
</PRE><P>
<STRONG>(See tmp1/splinefit.pro)</STRONG><P>
<HR>
 
<A NAME="SPLINF">
<H2>SPLINF</H2></A>
<A HREF="#SPLINEFIT">[Previous Routine]</A>
<A HREF="#SPLINT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
			splinf

 Given arrays X and Y of length N containing a tabulated function, i.e.
 Yi = f(Xi), with X1 < X2 < ... < Xn, and given values YP1 and YPN for the
 first derivative of the interpolating function at points 1 and N,
 respectively, this routine returns and array Y2 of length N which contains
 the second derivatives of the interpolating function at the tabulated points
 Xi.  If YP1 and/or YPN are equal to 1.E30 or larger, the routine is signalled
 to set the corresponding boundary condition for a natural spline, with zero
 second derivative on that boundary.

 SOURCE:
	Numerical Recipes, 1986. (page 88)
 
 CALLING SEQUENCE:
	splinf,x,y,n,yp1,ypn,y2

 INPUTS:
	x - independent variable vector
	y - dependent variable vector
	n - dimension of x and y vectors
	yp1 - first derivative at x(0)
	ypn - first derivative at x(n-1)

 OUTPUTS:
	y2 - second derivatives at all x, of length n

 HISTORY:
	converted to IDL, D. Neill, October, 1991
</PRE><P>
<STRONG>(See tmp1/splinf.pro)</STRONG><P>
<HR>
 
<A NAME="SPLINT">
<H2>SPLINT</H2></A>
<A HREF="#SPLINF">[Previous Routine]</A>
<A HREF="#STARCHCK">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
			splint

 Given arrays XA and YA of length N, which tabulate a function (with the
 XA's in order), and given the array Y2A, which is the output from SPLINE.PRO,
 and given a value of X this routine returns a cubic-spline interpolated
 value Y.

 SOURCE:
	Numerical Recipes, 1986. (page 89)
 
 CALLING SEQUENCE:
	splint,xa,ya,y2a,n,x,y

 INPUTS:
	xa - independent variable vector
	ya - dependent variable vector
	y2a- second derivative vector from SPLINF.PRO
	n  - length of above vectors
	x  - x value of interest

 OUTPUTS:
	y  - cubic-spline interpolated value at x

 HISTORY:
	converted to IDL, D. Neill, October, 1991
</PRE><P>
<STRONG>(See tmp1/splint.pro)</STRONG><P>
<HR>
 
<A NAME="STARCHCK">
<H2>STARCHCK</H2></A>
<A HREF="#SPLINT">[Previous Routine]</A>
<A HREF="#STARCHCK122">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
  print,'Center of ',vect([xc,yc]),' found after ',strn(i),' tries..'
</PRE><P>
<STRONG>(See tmp1/starchck.pro)</STRONG><P>
<HR>
 
<A NAME="STARCHCK122">
<H2>STARCHCK122</H2></A>
<A HREF="#STARCHCK">[Previous Routine]</A>
<A HREF="#STAREO">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
  print,total(tst),n_elements(tst)
  print,tst

</PRE><P>
<STRONG>(See tmp1/starchck122.pro)</STRONG><P>
<HR>
 
<A NAME="STAREO">
<H2>STAREO</H2></A>
<A HREF="#STARCHCK122">[Previous Routine]</A>
<A HREF="#STARFIT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   STAREO
 PURPOSE:
   STAREO is a main program which dabbles in 3D pattern pictures.
 CALLING SEQEUNCE:
   .run stareo
 INSTRUCTIONS:
   Align you eyes to inifinity.  The two dots will now we discrernable as
   four dots.  Slowly bring your eyes together until there are only three
   dots (i.e. the two center ones merge.)  If you carefully 'notice' the
   rest of the image, you will eventually be able to see a rectangle that
   appears to float a bit above the rest of the noise.  It works okay but
   not wonderfully...  once you got it, try setting objtype to 1 and 2 for
   different images.
         -E. Deutsch 2/16/93
</PRE><P>
<STRONG>(See tmp1/stareo.pro)</STRONG><P>
<HR>
 
<A NAME="STARFIT">
<H2>STARFIT</H2></A>
<A HREF="#STAREO">[Previous Routine]</A>
<A HREF="#STDEV">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
NAME:
      STARFIT
PURPOSE:
      Routine to fit a 2D gaussian to a stellar object
CALLING SEQUENCE:
      STARFIT,image,xguess,yguess,xc,yc,FWHM,INFO=INFO
INPUTS:
      IMAGE  - Input image
      XGUESS - Estimated initial X position of star (scalar!)
      YGUESS - Estimated initial Y position of star (scalar!)
OUTPUTS:
      XC     - Fit X position of star
      YC     - Fit Y position of star
      FWHM   - Returned FWHM of star
PROCEDURE:
      The IDL library routine for fitting a Gaussian to a distribution
      is used to fit to the marginal distribution.
MODIFICATION HISTORY
      Modified from XSPAM to generic use by EWDeutsch Nov93
</PRE><P>
<STRONG>(See tmp1/starfit.pro)</STRONG><P>
<HR>
 
<A NAME="STDEV">
<H2>STDEV</H2></A>
<A HREF="#STARFIT">[Previous Routine]</A>
<A HREF="#STRDEL">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	STDEV

 PURPOSE:
	Compute the standard deviation and, optionally, the
	mean of any array.

 CATEGORY:
	G1- Simple calculations on statistical data.

 CALLING SEQUENCE:
	Result = STDEV(Array [, Mean])

 INPUTS:
	Array:	The data array.  Array may be any type except string.

 OUTPUTS:
	STDEV returns the standard deviation (sample variance
	because the divisor is N-1) of Array.
		
 OPTIONAL OUTPUT PARAMETERS:
	Mean:	Upon return, this parameter contains the mean of the values
		in the data array.

 COMMON BLOCKS:
	None.

 SIDE EFFECTS:
	None.

 RESTRICTIONS:
	None.

 PROCEDURE:
	Mean = TOTAL(Array)/N_ELEMENTS(Array)
	Stdev = SQRT(TOTAL((Array-Mean)^2/(N-1)))

 MODIFICATION HISTORY:
	DMS, RSI, Sept. 1983.
	[7/17/95] E. Deutsch writes: RSI has done away with this function in
		IDL 4.0 in favor of a function called moment().  I keep this
		old routine around for backwards-compatibility and convenience
		sake.  [ stdev(var) is clearer than sqrt((moment(var)(0)) ]
</PRE><P>
<STRONG>(See tmp1/stdev.pro)</STRONG><P>
<HR>
 
<A NAME="STRDEL">
<H2>STRDEL</H2></A>
<A HREF="#STDEV">[Previous Routine]</A>
<A HREF="#STRN">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   StrDel
 PURPOSE:
   This function removes the piece specified from a string.  For example,
     IDL> str='   3,234.99'
     IDL> print,float(strdel(str,strpos(str,','),1))
   yields 3234.99
 CALLING SEQEUNCE:
   tmp = StrDel(string,pos,len)
 INPUT:
   STRING    This is the string variable from which the subtring it to be
               removed.
   POS       First character to remove where the first character is 0.
   LEN       Number of characters to remove.
 HISTORY:
   30-AUG-1990 Version 1 written.
   27-JUL-1992 Proper Header added.
</PRE><P>
<STRONG>(See tmp1/strdel.pro)</STRONG><P>
<HR>
 
<A NAME="STRN">
<H2>STRN</H2></A>
<A HREF="#STRDEL">[Previous Routine]</A>
<A HREF="#STRNSIGNIF">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	STRN
 PURPOSE:
	Convert a number to a string and remove padded blanks.
 EXPLANATION:
	The main and original purpose of this procedure is to convert a number
	to an unpadded string (i.e. with no blanks around it.)  However, it 
	has been expanded to be a multi-purpose formatting tool.  You may 
	specify a length for the output string; the returned string is either 
	set to that length or padded to be that length.  You may specify 
	characters to be used in padding and which side to be padded.  Finally,
	you may also specify a format for the number.  NOTE that the input 
	"number" need not be a number; it may be a string, or anything.  It is
	converted to string.

 CALLING SEQEUNCE:
	tmp = STRN( number, [ LENGTH=, PADTYPE=, PADCHAR=, FORMAT = ] )

 INPUT:
	NUMBER    This is the input variable to be operated on.  Traditionally,
		 it was a number, but it may be any scalar type.

 OPTIONAL INPUT:
	LENGTH    This KEYWORD specifies the length of the returned string.  
		If the output would have been longer, it is truncated.  If 
		the output would have been shorter, it is padded to the right 
		length.
	PADTYPE   This KEYWORD specifies the type of padding to be used, if any.
		0=Padded at End, 1=Padded at front, 2=Centered (pad front/end)
		IF not specified, PADTYPE=1
	PADCHAR   This KEYWORD specifies the character to be used when padding.
		The default is a space (' ').
	FORMAT    This keyword allows the FORTRAN type formatting of the input
		number (e.g. '(f6.2)')

 OUTPUT:
	tmp       The formatted string

 USEFUL EXAMPLES:
	print,'Used ',strn(stars),' stars.'  ==> 'Used 22 stars.'
	print,'Attempted ',strn(ret,leng=6,padt=1,padch='0'),' retries.'
		==> 'Attempted 000043 retries.'
	print,strn('M81 Star List',length=80,padtype=2)
		==> an 80 character line with 'M81 Star List' centered.
	print,'Error: ',strn(err,format='(f15.2)')
		==> 'Error: 3.24'     or ==> 'Error: 323535.22'

 HISTORY:
	03-JUL-90 Version 1 written by Eric W. Deutsch
	10-JUL-90 Trimming and padding options added         (E. Deutsch)
	29-JUL-91 Changed to keywords and header spiffed up     (E. Deutsch)
	Ma7 92 Work correctly for byte values (W. Landsman)
	19-NOV-92 Added Patch to work around IDL 2.4.0 bug which caused an
	error when STRN('(123)') was encountered.            (E. Deutsch)
	Converted to IDL V5.0   W. Landsman   September 1997
</PRE><P>
<STRONG>(See tmp1/strn.pro)</STRONG><P>
<HR>
 
<A NAME="STRNSIGNIF">
<H2>STRNSIGNIF</H2></A>
<A HREF="#STRN">[Previous Routine]</A>
<A HREF="#SUNRISESET">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	STRNSIGNIF
 PURPOSE:
	Convert a number to a string with a fixed number of significant digits.
 EXPLANATION:
	Similar to strn(), this function converts a number to a string, but,
	unlike strn(), with a fixed number of significant digits.

 CALLING SEQEUNCE:
	tmp = STRNSIGNIF( number, digits )

 INPUT:
	NUMBER   This is the input number to be converted to a string.

 OUTPUT:
	tmp       The formatted string

 EXAMPLES:
	IDL> print,strnsignif(12345.6789,3)  
	12300
	IDL> print,strnsignif(1.23456789,3)
	1.23
	IDL> print,strnsignif(.00123456789,3)
	0.00123

 HISTORY:
	1999-03-29 Version 1 written by Eric W. Deutsch & Brooke Skelton
</PRE><P>
<STRONG>(See tmp1/strnsignif.pro)</STRONG><P>
<HR>
 
<A NAME="SUNRISESET">
<H2>SUNRISESET</H2></A>
<A HREF="#STRNSIGNIF">[Previous Routine]</A>
<A HREF="#SXHREAD">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
      ct2lst,lst,-1.0*longitude,timezone,jul_date-0.5d + UTs(j)/24.0d
</PRE><P>
<STRONG>(See tmp1/sunriseset.pro)</STRONG><P>
<HR>
 
<A NAME="SXHREAD">
<H2>SXHREAD</H2></A>
<A HREF="#SUNRISESET">[Previous Routine]</A>
<A HREF="#SXPAR">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	SXHREAD                         
 PURPOSE:
	Procedure to read a STSDAS header from disk.  
 EXPLANATION:
	This version of SXHREAD can read three types of disk files
	(1)  VMS Fixed record length 80 byte files, or GEIS files with
		VMS buckets
	(2)  Unix stream files with a CR after every 80 bytes
	(3)  Variable length record files (Unix or VMS)

 CALLING SEQUENCE:
	sxhread, name, header

 INPUT:
	name - file name, scalar string.  An extension of .hhh is appended 
		if not already supplied.   (Note STSDAS headers are required
		to have a 3 letter extension ending in 'h'.)
 OUTPUT:
	header - STSDAS header, string array
 NOTES:
	SXHREAD  does not do any checking to see if the file is a valid
	STSDAS header.    It simply reads the file into a string array with
	80 byte elements

 HISTORY:
	Version 1  D. Lindler  July, 1987
	Version 2  M. Greason, August 1990
	Use READU for certain ST VAX GEIS files   W. Landsman January, 1992
	Read variable length Unix files  E. Deutsch/W. Landsman November, 1994
	Converted to IDL V5.0   W. Landsman   September 1997
</PRE><P>
<STRONG>(See tmp1/sxhread.pro)</STRONG><P>
<HR>
 
<A NAME="SXPAR">
<H2>SXPAR</H2></A>
<A HREF="#SXHREAD">[Previous Routine]</A>
<A HREF="#TVBALL">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
      SXPAR
 PURPOSE:
      Obtain the value of a parameter in a FITS header

 CALLING SEQUENCE:
      result = SXPAR( Hdr, Name, [ Abort, COUNT=, COMMENT =, /NoCONTINUE  ])   

 INPUTS:
      Hdr =  FITS header array, (e.g. as returned by READFITS) 
             string array, each element should have a length of 80 characters      

      Name = String name of the parameter to return.   If Name is of the
             form 'keyword*' then an array is returned containing values of
             keywordN where N is an integer.  The value of keywordN will be
             placed in RESULT(N-1).  The data type of RESULT will be the
             type of the first valid match of keywordN found.

 OPTIONAL INPUTS:
       ABORT - string specifying that SXPAR should do a RETALL
               if a parameter is not found.  ABORT should contain
               a string to be printed if the keyword parameter is not found.
               If not supplied SXPAR will return with a negative
               !err if a keyword is not found.

 OPTIONAL INPUT KEYWORDS: 
       /NOCONTINUE = If set, then continuation lines will not be read, even
                 if present in the header

 OPTIONAL OUTPUT KEYWORDS:
       COUNT - Optional keyword to return a value equal to the number of 
               parameters found by sxpar, integer scalar

       COMMENT - Array of comments associated with the returned values

 OUTPUTS:
       Function value = value of parameter in header.
               If parameter is double precision, floating, long or string,
               the result is of that type.  Apostrophes are stripped
               from strings.  If the parameter is logical, 1b is
               returned for T, and 0b is returned for F.
               If Name was of form 'keyword*' then a vector of values
               are returned.

 SIDE EFFECTS:
       !ERR is set to -1 if parameter not found, 0 for a scalar
       value returned.  If a vector is returned it is set to the
       number of keyword matches found.

       If a keyword occurs more than once in a header, a warning is given,
       and the first occurence is used.

 EXAMPLES:
       Given a FITS header, h, return the values of all the NAXISi values
       into a vector.    Then place the history records into a string vector.

       IDL> naxisi = sxpar( h ,'NAXIS*')         ; Extract NAXISi value
       IDL> history = sxpar( h, 'HISTORY' )      ; Extract HISTORY records

 PROCEDURE:
       The first 8 chacters of each element of Hdr are searched for a 
       match to Name.  The value from the last 20 characters is returned.  
       An error occurs if there is no parameter with the given name.
       
       If a numeric value has no decimal point it is returned as type
       LONG.   If it contains more than 8 numerals, or contains the 
       character 'D', then it is returned as type DOUBLE.  Otherwise
       it is returned as type FLOAT.    Very large integer values, outside
       the range of valid LONG, are returned as DOUBLE.

       If the value is too long for one line, it may be continued on to the
       the next input card, using the OGIP CONTINUE convention.  For more info,
       http://heasarc.gsfc.nasa.gov/docs/heasarc/ofwg/docs/ofwg_recomm/r13.html

       Complex numbers are recognized as two numbers separated by one or more
       space characters.

       If a numeric value has no decimal point (or E or D) it is returned as
       type LONG.  If it contains more than 8 numerals, or contains the
       character 'D', then it is returned as type DOUBLE.  Otherwise it is
       returned as type FLOAT.    If an integer is too large to be stored as
       type LONG, then it is returned as DOUBLE.

 NOTES:
       The functions SXPAR() and FXPAR() are nearly identical, although
       FXPAR() has slightly more sophisticated parsing.   There is no
       particular reason for having two nearly identical procedures, but
       both are too widely used to drop either one.

 PROCEDURES CALLED:
       GETTOK(), STRNUMBER()
 MODIFICATION HISTORY:
       DMS, May, 1983, STPAR Written.
       D. Lindler Jan 90 added ABORT input parameter
       J. Isensee Jul,90 added COUNT keyword
       W. Thompson, Feb. 1992, added support for FITS complex values.
       W. Thompson, May 1992, corrected problem with HISTORY/COMMENT/blank
               keywords, and complex value error correction.
       W. Landsman, November 1994, fix case where NAME is an empty string 
       W. Landsman, March 1995,  Added COMMENT keyword, ability to read
               values longer than 20 character
       W. Landsman, July 1995, Removed /NOZERO from MAKE_ARRAY call
       T. Beck May 1998, Return logical as type BYTE
       W. Landsman May 1998, Make sure integer values are within range of LONG
       Converted to IDL V5.0, May 1998
       W. Landsman Feb 1998, Recognize CONTINUE convention 
</PRE><P>
<STRONG>(See tmp1/sxpar.pro)</STRONG><P>
<HR>
 
<A NAME="TVBALL">
<H2>TVBALL</H2></A>
<A HREF="#SXPAR">[Previous Routine]</A>
<A HREF="#UIT_SKY_VALUE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   TVBALL
 PURPOSE:
   Interactively adjust the lower limit and range of a linear color table.
   TVBALL is similar to CONTRAST but it allows one to individually control 
   each of the red, blue, and green color guns.    It is especially useful
   when different color guns have been assigned to different image planes
   with COLOR.  The user interfaces with the procedure through the mouse,
   using the mouse buttons to issue various commands.
 CALLING SEQUENCE:
   TVBALL
   TVBALL,/HELP                 ;Print out help on use of TVBALL
   TVBALL,color                 ;Bypass prompts, e.g. TVBALL,'r'
 OPTIONAL INPUTS:
   color - single character string 'R', 'G', or 'B' indicating the color
           gun to modify.
 OPTIONAL KEYWORD INPUT:
   HELP - If supplied, and non-zero, then the user is guided step by step
          through TVBALL
 OUTPUTS:
   None.
 METHOD:
   The slope and midpoint of a linear lookup table are determined as in
   CONTRAST, but TVBALL modifies only a single color gun at a time.
 NOTES:
   TVBALL takes no action until the user chooses a color gun.  The color
   table is gotten through the use of the SAVLUT procedure.   User options
   are as follows

    Move cursor UP   to increase contrast               
    Move cursor LEFT to lower zero level                
    Click the LEFT   mouse button to issue a command    
    Click the MIDDLE mouse button to get this help list 
    Click the RIGHT  mouse button to Exit               
 REVISION HISTORY:
   Written, W. Landsman November 1986
   IVAS Version  July 1989
   Adapted to IDL version 2 and workstation.  M. Greason, STX, June 1990
</PRE><P>
<STRONG>(See tmp1/tvball.pro)</STRONG><P>
<HR>
 
<A NAME="UIT_SKY_VALUE">
<H2>UIT_SKY_VALUE</H2></A>
<A HREF="#TVBALL">[Previous Routine]</A>
<A HREF="#UJCHART">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
  Call: UIT_sky_value,img,skyv,maxv
   This procedure is much like DJL's SKY_VALUE is calling sequence but
   but it optimaized to return nice display values for UIt images.
</PRE><P>
<STRONG>(See tmp1/uit_sky_value.pro)</STRONG><P>
<HR>
 
<A NAME="UJCHART">
<H2>UJCHART</H2></A>
<A HREF="#UIT_SKY_VALUE">[Previous Routine]</A>
<A HREF="#UNRED">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>

 UJCHART - an example reading/plotting program for use with the UJ 1.0
  astrometric catalog.  -Deutsch

</PRE><P>
<STRONG>(See tmp1/ujchart.pro)</STRONG><P>
<HR>
 
<A NAME="UNRED">
<H2>UNRED</H2></A>
<A HREF="#UJCHART">[Previous Routine]</A>
<A HREF="#USER_KBD">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   UNRED
 PURPOSE:
   Correct a flux vector for interstellar extinction based on the the
   results of Cardelli, Clayton, & Mathis 1989, ApJ, 345, 245
 CALLING SEQUENCE:
   UNRED,wave,flux,ebv,funred      
 INPUT:
   WAVE - wavelength vector (Angstroms)
   FLUX - calibrated flux vector, same number of elements as WAVE
   EBV  - color excess E(B-V), scalar.  If a negative EBV is supplied,
          then fluxes will be reddened rather than deredenned.
 OUTPUT:
   FUNRED - unreddened flux vector, same units and number of elements
            as FLUX
 REVISION HISTORY:
   1999-02-09: Rewrote UIT procedure of the same name to just use
               the new results of Cardelli et al. (1989) by E. Deutsch
</PRE><P>
<STRONG>(See tmp1/unred.pro)</STRONG><P>
<HR>
 
<A NAME="USER_KBD">
<H2>USER_KBD</H2></A>
<A HREF="#UNRED">[Previous Routine]</A>
<A HREF="#VECT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Calls: User_Kbd,image,img1,mx,my,KeyHit
   image  -  whole image
   img1   -  currently displayed frame
   mx     -  current x cursor position in whole image 
   my     -  current y cursor position in whole image
               center of lower left pixel is (0.00,0.00)
   KeyHit -  The (first) character hit.  Note that there may be more
               characters in the keyboard buffer and the first
               character could be an ESC, the first character of an
               escape sequence (e.g. up arrow).
   When adding a function to User_Kbd, be sure that the procedure does
   not disturb the value in KeyHit unless it processes the Key Hit, at
   which point it should set KeyHit='' so that if you are overriding the
   default key calls, they are not called, too...
   Remember to take case sensitivity into account!
   The keyboard buffer is flushed after both the User and default handler
   runs.
</PRE><P>
<STRONG>(See tmp1/user_kbd.pro)</STRONG><P>
<HR>
 
<A NAME="VECT">
<H2>VECT</H2></A>
<A HREF="#USER_KBD">[Previous Routine]</A>
<A HREF="#WAVG">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	VECT
 PURPOSE:
	Print a set of numbers as a string with delimiters included
 EXPLANATION:
	This function returns the given vector in parenthesized coordinates
	as in the form (X,Y).  No limit on the number of dimensions.  Also
	note that the vector does not need to be numbers.  It may also be a
	string vector.  e.g. ['X','Y']

 CALLING SEQEUNCE:
	tmp = VECT( vctr, [ form, FORMAT = , DELIM =  ] )
 INPUT:
	VCTR      The vector to be displayed  e.g. [56,44]

 OPTIONAL KEYWORD INPUT:
	FORMAT    This KEYWORD allows the specification of a format for the
		elements.  e.g.: VECT([2,3],format='(f7.1)') gives '(2.0,3.0)'
	DELIM     This KEYWORD specifies the delimeter.  The default is ',' but
		other useful examples might be ', ' or ':'

 OPTIONAL INPUT
	FORM      This parameter may be used instead of the keyword FORMAT

 OUTPUT:
	tmp       A returned string of the parenthesized vector

 Other Procedures/Functions Called:
	STRN

 HISTORY:
	03-JUL-90 Version 1 written by Eric W. Deutsch
	24-AUG-91 Format='' keyword added (E. Deutsch)
	29-AUG-91 FORM parameter added (E. Deutsch)
	Converted to IDL V5.0   W. Landsman   September 1997
</PRE><P>
<STRONG>(See tmp1/vect.pro)</STRONG><P>
<HR>
 
<A NAME="WAVG">
<H2>WAVG</H2></A>
<A HREF="#VECT">[Previous Routine]</A>
<A HREF="#WFPC2LIST">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 quicky weighted average

 results=wavg(array,weights,/weights)
 or
 results=wavg(array,errors,/errors)

</PRE><P>
<STRONG>(See tmp1/wavg.pro)</STRONG><P>
<HR>
 
<A NAME="WFPC2LIST">
<H2>WFPC2LIST</H2></A>
<A HREF="#WAVG">[Previous Routine]</A>
<A HREF="#WFPCMRG">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 No formal header yet.  See the documentation in
   http//www.astro.washington.edu/deutsch/apoinfo.html
</PRE><P>
<STRONG>(See tmp1/wfpc2list.pro)</STRONG><P>
<HR>
 
<A NAME="WFPCMRG">
<H2>WFPCMRG</H2></A>
<A HREF="#WFPC2LIST">[Previous Routine]</A>
<A HREF="#WHICH">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   WFPCMRG
 DESCRIPTION:
   This procedure is designed to load all four chips of a WF or a PC
   and combining them into one 16 bit INTEGER image.  The chips may
   be trimmed or left whole.  Sky subtraction options are available.
   This is desgined for WFPC I images only!
 CALLING SEQUENCE:
   wfpcmrg,infile,outfile,trim,sky,CRclean
 INPUT PARAMETERS:
   INFILE     The name of the input WFPC group file with HEADER extender
   OUTFILE    The name of the output assembled file with HEADER extender
   TRIM       Trim Method:  This flag specifies the type of trimming used:
                0 = No Trimming
                1 = Trimming according to parameters decided by RCB & EWD
                    such that there is a small gap between the chips, so
                    that no part of the image is lost. (DEFAULT)
                2 = Trimming so that the Astrometry is fairly accurate for
                    all 4 chips.  (NOT YET AVAILABLE)
   SKY	       Sky/background subtraction.  The background can be subtracted
                according to the following specifications.  The SKYCALC
                procedure returns a median sky value and the RMS of the
                sky level noise.  Values of SKY subtract to obatain the
                following specifications:
                  0 = No Sky subtraction.  Chips assembled as is. (DEFAULT)
                  1 = Subtract SKYV+1.5*RMS which is usually about the top
                      of the noise.
                  2 = Subtract SKYV which is usually the middle of the
                      sky level noise
                  3 = Subtract SKYV-1.5*RMS which is usually about the
                      bottom of the noise level.
                  4 = Adjust sky level of all chips to be equal to that of
                      chip 1 (add or subtract as necessary)
                  5 = Use DJL routine SKY_VALUE to compute the sky and
                      maximum value of each chip
                  n = If SKY is greater than 5, the sky level of all chips
 	               will be set to this value (+ or - as necessary)
   CRCLEAN    Set to 1 to remove Cosmic Rays.  (Default=0)
 OUTPUT:
   The output files: both header and data files
   All passed variables remain unchanged
 NOTES:
   - Chips are never rotated during the matching.  To do the best fitting
     job, they need to be rotated (resampled).  The current trimming
     is 'best guess
   - Some portions of this program were taken from a procedure called
     MOSAIC by E. Malumuth (written 25-MAY-90.)
 HISTORY:
   05-JUN-90 Version 1 written by Eric W. Deutsch
   22-JUN-90 Trimming values finalized for WF (RCB and EWD)
   08-AUG-90 Sky subtraction, History writing, and Astrometry
     Interpretation parts fixed and extended.  EWD.
   09-AUG-90 Added parameters needed by DJL for his CELCO submission
     rountines.  EWD.
   21-SEP-90 Chips reoriented to match Press release orientation
     (presumably correct.  Original MOSAIC was wrong...)  EWD.
   10-DEC-92 Fixed header and tidied up a bit.  EWD.
</PRE><P>
<STRONG>(See tmp1/wfpcmrg.pro)</STRONG><P>
<HR>
 
<A NAME="WHICH">
<H2>WHICH</H2></A>
<A HREF="#WFPCMRG">[Previous Routine]</A>
<A HREF="#WHITESKY">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
	WHICH

 PURPOSE:
	Determine in which library/directory the procedure or function
	specified is located in the !PATH.  This is useful for finding
	out which library a certain procedure comes from, particularly
	when there are duplicates.  This is similar to the unix
	'which' command.

 CALLING SEQUENCE:
    WHICH, [ proc_name ]          ;Find PROC_NAME in !PATH and display

 OPTIONAL INPUT:
	proc_name - Character string giving the name of the IDL procedure or 
		function.  Do not give an extension.   If omitted, 
		the program will prompt for PROC_NAME.

 OUTPUTS:
	None.

 SIDE EFFECTS
	None.

 PROCEDURE:
	The system variable !PATH is parsed into individual libraries or 
	directories.   Each library or directory is then searched for the
	procedure name.  If not found in !PATH,
	then the ROUTINES.HELP file is checked to see if it is an intrinsic
	IDL procedure.

 EXAMPLE:
	Find out where the procedure CURVEFIT lives.

	IDL> which, 'curvefit'

 RESTRICTIONS:
	None.

 REVISION HISTORY:
	29-MAY-94  Modified from getpro.pro by E. Deutsch
	14-JUL-95  Fixed for IDL 4.0
</PRE><P>
<STRONG>(See tmp1/which.pro)</STRONG><P>
<HR>
 
<A NAME="WHITESKY">
<H2>WHITESKY</H2></A>
<A HREF="#WHICH">[Previous Routine]</A>
<A HREF="#WIN_INIT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   WHITESKY
 PURPOSE:
   Changes current color table to black on white.
 CALLING SEQEUNCE:
   WhiteSky
 OPTIONAL INPUT KEYWORDS:
   ALW       If set, the usual linear white to black color table is replaced
               by an odd exponential function which approximates an
               Apple Laster Writer density color table (i.e. if you use
               /ALW the stretch on the screen will look more like an ALW)
   RESERVE   string which specifies if some colors are to be reserved at
             the top of bottom of the color table.  Current options are:
             'RED'
 OUTPUT:
   Changes current color table and updates color table COMMON block.
 HISTORY:
   17-NOV-92 Header added to old routine  (E. Deutsch)
   11-JAN-93 Changed name from NEG to WHITESKY  (E. Deutsch)
   04-APR-94 Added proper handling when !d.n_colors is low.  (E. Deutsch)
   29-MAY-94 Added /ALW keyword and handling.  (E. Deutsch)
   29-APR-97 Added limit of !d.n_colors=256.  (E. Deutsch)
</PRE><P>
<STRONG>(See tmp1/whitesky.pro)</STRONG><P>
<HR>
 
<A NAME="WIN_INIT">
<H2>WIN_INIT</H2></A>
<A HREF="#WHITESKY">[Previous Routine]</A>
<A HREF="#XMESSAGE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 This procedure creates the Window Manager structure if it does not already
   exist.  A call to this function will not disrupt the window structure if it
   already exists, unless flag is set to 1, in which case, all windows are
   deleted.
ro win_init,flag

</PRE><P>
<STRONG>(See tmp1/win_init.pro)</STRONG><P>
<HR>
 
<A NAME="XMESSAGE">
<H2>XMESSAGE</H2></A>
<A HREF="#WIN_INIT">[Previous Routine]</A>
<A HREF="#YESNO2">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
NAME:
      XMESSAGE
PURPOSE:
      Routine to pop up little widget dialog boxes.  Each box contains
      a message and some buttons.  The user sees the message and chooses
      a button, the index of which is returned to the calling procedure.
CALLING SEQUENCE:
      XMESSAGE,message,buttons_array,Ret_Pushed_button
INPUTS:
      MESSAGE  - A scalar string of the message.  The '\' indicates a
                 forced line break, and the message is parsed into
                 ~50 character lines by xmessage.
      BUTTONS  - A vector of buttons labels (e.g. ['OK','CANCEL','HELP'] )
OUTPUTS:
      RET_PUSH - Index of the button the user pushed (first button is 0)
PROCEDURE:
      Message is parsed and displayed with the provided buttons.  User
      pushes a button and the index is returned.  This procedure is
      intentionally flexible.  All sorts of goodies can be thought up.
EXAMPLES:
   xmessage,'You must select at least 3 stars before you can create an '+ $
     'astrometric solution',['OK','CANCEL','Try Anyway'],Ret_Val

   xmessage,'File '+filename+' already exists!  Do you want to: ', $
     ['Replace','View File','CANCEL'],Ret_Val
MODIFICATION HISTORY
      05-JUN-94  Written by Eric W. Deutsch
</PRE><P>
<STRONG>(See tmp1/xmessage.pro)</STRONG><P>
<HR>
 
<A NAME="YESNO2">
<H2>YESNO2</H2></A>
<A HREF="#XMESSAGE">[Previous Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
   YESNO2
 PURPOSE:
   This function returns a string corresponding YES/NO to 1/0.  i.e. if a 1
   is passed to YESNO2, the string 'YES' or 'Yes' or 'yes' or 'y' is returned.
 CALLING SEQEUNCE:
   tmp=yesno2(1,type=1)
 INPUT:
   FLAG      This variable should contain 1 for YES and 0 for NO.
 OPTIONAL KEYWORDS:
   TYPE      Specifies the mode or type of returned string (default=0)
      Other equivalents:
   type= 0    1    2     3    4    5      6     7     8    9   10  11    12
   F=1 'YES','Y','Yes','yes','y','yup',  'ON', 'On', 'on','X','1','Si' , 'Ja'
   F=0  'NO','N', 'No', 'no','n','nope','OFF','Off','off',' ','0','Non','Nein'
   OTHER     Specifies what to return if flag is neither 0 nor 1.
 OUTPUT:
   tmp       The string containing the answer
 NOTES:
   none
 HISTORY:
   02-JUN-92  Older Version of YesNo2 Finished and documented.   E. Deutsch
</PRE><P>
<STRONG>(See tmp1/yesno2.pro)</STRONG><P>
<HR>
 
</body>
</html>
